2022-50-16 16:50:54.245 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-50-16 16:50:54.249 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-50-16 16:50:54.250 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-50-16 16:50:54.297 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-50-16 16:50:54.334 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-50-16 16:50:54.338 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2ca6546f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@43826ec, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7923f5b3, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7578e06a, org.springframework.test.context.event.EventPublishingTestExecutionListener@30b2b76f, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@56da52a7, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@23ee75c5, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@11a7ba62, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@340b7ef6, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@30404dba, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6050462a, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@4c0884e8, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@231baf51]
2022-50-16 16:50:54.493 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-50-16 16:50:54.509 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-Air with PID 30735 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-50-16 16:50:54.510 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-50-16 16:50:54.847 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d5cd8e40-62e5-3016-9576-32318fdf5388
2022-50-16 16:50:55.179 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1489ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-50-16 16:50:55.291 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-50-16 16:50:55.299 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@29c25bbc{/__admin,null,AVAILABLE}
2022-50-16 16:50:55.304 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-50-16 16:50:55.304 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7d18338b{/,null,AVAILABLE}
2022-50-16 16:50:55.309 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1c43df76{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12151}
2022-50-16 16:50:55.312 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@4cc89246(wiremock,h=[tom akehurst],a=[],w=[]) for Server@76134b9b[provider=null,keyStore=null,trustStore=null]
2022-50-16 16:50:55.345 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@38667005{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14102}
2022-50-16 16:50:55.345 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1655ms
2022-50-16 16:50:55.624 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-50-16 16:50:55.625 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-50-16 16:50:55.626 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-50-16 16:50:55.821 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 57521
2022-50-16 16:50:55.838 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.482 seconds (JVM running for 2.148)
2022-50-16 16:50:56.512 [reactor-http-nio-4] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:57521/savings/a/balance is routed to id: 49d4a632-a960-4dd1-9b66-09af4d097f64, uri:http://localhost:12151/balance
2022-50-16 16:50:56.574 [qtp242416388-46] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Forwarded: [proto=http;host="localhost:57521";for="127.0.0.1:57522"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [57521]
X-Forwarded-Host: [localhost:57521]
Host: [localhost:12151]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [89dd9c80-0b11-4729-936a-74c5fa0b0df4]


2022-50-16 16:50:57.604 [reactor-http-nio-4] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:57521/savings/a/balance is routed to id: 49d4a632-a960-4dd1-9b66-09af4d097f64, uri:http://localhost:12151/balance
2022-50-16 16:50:57.609 [qtp242416388-24] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [2]
Forwarded: [proto=http;host="localhost:57521";for="127.0.0.1:57522"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [57521]
X-Forwarded-Host: [localhost:57521]
Host: [localhost:12151]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [3ae177f5-5400-4c49-8a08-fc00c6e988f9]


2022-50-16 16:50:57.643 [reactor-http-nio-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:57521/savings/b/balance is routed to id: 161c4482-ff43-49c6-a7fa-57540382adb8, uri:http://localhost:12151/balance
2022-50-16 16:50:57.646 [qtp242416388-44] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Forwarded: [proto=http;host="localhost:57521";for="127.0.0.1:57525"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [57521]
X-Forwarded-Host: [localhost:57521]
Host: [localhost:12151]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [3ae177f5-5400-4c49-8a08-fc00c6e988f9]


2022-50-16 16:50:57.662 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@1c43df76{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12151}
2022-50-16 16:50:57.663 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@38667005{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14102}
2022-50-16 16:50:57.664 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@7d18338b{/,null,STOPPED}
2022-50-16 16:50:57.664 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@29c25bbc{/__admin,null,STOPPED}
2022-50-16 16:50:57.679 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-50-16 16:50:57.682 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@29c25bbc{/__admin,null,AVAILABLE}
2022-50-16 16:50:57.682 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-50-16 16:50:57.683 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7d18338b{/,null,AVAILABLE}
2022-50-16 16:50:57.685 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1c43df76{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12151}
2022-50-16 16:50:57.686 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@49bf5ec8(wiremock,h=[tom akehurst],a=[],w=[]) for Server@76134b9b[provider=null,keyStore=null,trustStore=null]
2022-50-16 16:50:57.690 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@38667005{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14102}
2022-50-16 16:50:57.691 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4001ms
2022-50-16 16:50:57.703 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@1c43df76{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12151}
2022-50-16 16:50:57.704 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@38667005{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14102}
2022-50-16 16:50:57.704 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@7d18338b{/,null,STOPPED}
2022-50-16 16:50:57.704 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@29c25bbc{/__admin,null,STOPPED}
2022-50-16 16:50:57.708 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [e8d452d4-2, L:/127.0.0.1:57522 ! R:localhost/127.0.0.1:57521] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-50-16 16:50:57.708 [reactor-http-nio-5] WARN  reactor.netty.http.client.HttpClientConnect - [f06b82dd-1, L:/127.0.0.1:57525 ! R:localhost/127.0.0.1:57521] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-28-16 17:28:59.341 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-28-16 17:28:59.344 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-28-16 17:28:59.344 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-28-16 17:28:59.393 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-28-16 17:28:59.451 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-28-16 17:28:59.456 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6f8e0cee, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@614aeccc, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@5116ac09, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1bc425e7, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4b2a30d, org.springframework.test.context.event.EventPublishingTestExecutionListener@322803db, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@56ba8773, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6ceb7b5e, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@7dd00705, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@f14e5bf, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@d176a31, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@3a91d146, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@4784013e, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@6f952d6c]
2022-28-16 17:28:59.651 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-28-16 17:28:59.670 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-Air with PID 33008 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-28-16 17:28:59.670 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-16 17:29:00.160 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d5cd8e40-62e5-3016-9576-32318fdf5388
2022-29-16 17:29:00.565 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @2054ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-29-16 17:29:00.718 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-16 17:29:00.726 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4b7ab7ab{/__admin,null,AVAILABLE}
2022-29-16 17:29:00.731 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-16 17:29:00.731 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@636fccb0{/,null,AVAILABLE}
2022-29-16 17:29:00.736 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1d2046bb{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11801}
2022-29-16 17:29:00.739 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@5c25daad(wiremock,h=[tom akehurst],a=[],w=[]) for Server@7d8f2eec[provider=null,keyStore=null,trustStore=null]
2022-29-16 17:29:00.764 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@e886caf{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13601}
2022-29-16 17:29:00.765 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @2253ms
2022-29-16 17:29:01.069 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-29-16 17:29:01.069 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-29-16 17:29:01.069 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-29-16 17:29:01.069 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-29-16 17:29:01.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-29-16 17:29:01.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-29-16 17:29:01.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-29-16 17:29:01.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-29-16 17:29:01.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-29-16 17:29:01.072 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-29-16 17:29:01.072 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-29-16 17:29:01.072 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-29-16 17:29:01.072 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-29-16 17:29:01.072 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-29-16 17:29:01.286 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 57609
2022-29-16 17:29:01.305 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.827 seconds (JVM running for 2.794)
2022-29-16 17:29:02.125 [reactor-http-nio-4] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:57609/savings/a/balance is routed to id: 060f7166-7ae2-4289-a016-a8ed08e31278, uri:http://localhost:11801/balance
2022-29-16 17:29:02.195 [qtp1428771375-46] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Forwarded: [proto=http;host="localhost:57609";for="127.0.0.1:57610"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [57609]
X-Forwarded-Host: [localhost:57609]
Host: [localhost:11801]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [546b117d-dfa7-4814-bb07-8d441b7b9ed1]


2022-29-16 17:29:02.217 [reactor-http-nio-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:57609/savings/b/balance is routed to id: cc3addff-b73f-4ac9-a93a-349c1fed1a7f, uri:http://localhost:11801/balance
2022-29-16 17:29:02.221 [qtp1428771375-24] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [2]
Forwarded: [proto=http;host="localhost:57609";for="127.0.0.1:57612"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [57609]
X-Forwarded-Host: [localhost:57609]
Host: [localhost:11801]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [546b117d-dfa7-4814-bb07-8d441b7b9ed1]


2022-29-16 17:29:02.275 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@1d2046bb{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11801}
2022-29-16 17:29:02.276 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@e886caf{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13601}
2022-29-16 17:29:02.277 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@636fccb0{/,null,STOPPED}
2022-29-16 17:29:02.278 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@4b7ab7ab{/__admin,null,STOPPED}
2022-29-16 17:29:02.283 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-16 17:29:02.284 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4b7ab7ab{/__admin,null,AVAILABLE}
2022-29-16 17:29:02.285 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-16 17:29:02.285 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@636fccb0{/,null,AVAILABLE}
2022-29-16 17:29:02.287 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1d2046bb{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11801}
2022-29-16 17:29:02.287 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@29f86630(wiremock,h=[tom akehurst],a=[],w=[]) for Server@7d8f2eec[provider=null,keyStore=null,trustStore=null]
2022-29-16 17:29:02.292 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@e886caf{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13601}
2022-29-16 17:29:02.293 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @3782ms
2022-29-16 17:29:02.302 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@1d2046bb{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11801}
2022-29-16 17:29:02.303 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@e886caf{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13601}
2022-29-16 17:29:02.303 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@636fccb0{/,null,STOPPED}
2022-29-16 17:29:02.303 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@4b7ab7ab{/__admin,null,STOPPED}
2022-29-16 17:29:02.307 [reactor-http-nio-5] WARN  reactor.netty.http.client.HttpClientConnect - [9234a5b3-1, L:/127.0.0.1:57612 ! R:localhost/127.0.0.1:57609] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-29-16 17:29:02.307 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [aed109ce-1, L:/127.0.0.1:57610 ! R:localhost/127.0.0.1:57609] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-32-16 18:32:01.498 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-32-16 18:32:01.501 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-32-16 18:32:01.502 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-32-16 18:32:01.551 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-32-16 18:32:01.584 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-32-16 18:32:01.589 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2ca6546f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@43826ec, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7923f5b3, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7578e06a, org.springframework.test.context.event.EventPublishingTestExecutionListener@30b2b76f, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@56da52a7, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@23ee75c5, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@11a7ba62, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@340b7ef6, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@30404dba, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6050462a, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@4c0884e8, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@231baf51]
2022-32-16 18:32:01.764 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-32-16 18:32:01.776 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-Air with PID 36806 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-32-16 18:32:01.777 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-32-16 18:32:02.191 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d5cd8e40-62e5-3016-9576-32318fdf5388
2022-32-16 18:32:02.575 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1632ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-32-16 18:32:02.720 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-32-16 18:32:02.728 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@403f7aa2{/__admin,null,AVAILABLE}
2022-32-16 18:32:02.732 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-32-16 18:32:02.733 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@59f76e56{/,null,AVAILABLE}
2022-32-16 18:32:02.739 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5fbae40{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12198}
2022-32-16 18:32:02.742 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@f42336c(wiremock,h=[tom akehurst],a=[],w=[]) for Server@26d73519[provider=null,keyStore=null,trustStore=null]
2022-32-16 18:32:02.767 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@48af5f38{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13057}
2022-32-16 18:32:02.767 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1825ms
2022-32-16 18:32:03.098 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-32-16 18:32:03.098 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-32-16 18:32:03.098 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-32-16 18:32:03.098 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-32-16 18:32:03.098 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-32-16 18:32:03.098 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-32-16 18:32:03.098 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-32-16 18:32:03.099 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-32-16 18:32:03.099 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-32-16 18:32:03.099 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-32-16 18:32:03.099 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-32-16 18:32:03.099 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-32-16 18:32:03.099 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-32-16 18:32:03.099 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-32-16 18:32:03.319 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 58193
2022-32-16 18:32:03.336 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.726 seconds (JVM running for 2.394)
2022-32-16 18:32:04.034 [reactor-http-nio-4] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58193/savings/a/balance is routed to id: aa9fdda4-fdff-48c1-b8f8-85e268367b88, uri:http://localhost:12198/balance
2022-32-16 18:32:04.102 [qtp904355706-46] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Forwarded: [proto=http;host="localhost:58193";for="127.0.0.1:58194"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58193]
X-Forwarded-Host: [localhost:58193]
Host: [localhost:12198]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [7975352c-a00e-4cf0-9b08-883941113ee8]


2022-32-16 18:32:05.126 [reactor-http-nio-4] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58193/savings/a/balance is routed to id: aa9fdda4-fdff-48c1-b8f8-85e268367b88, uri:http://localhost:12198/balance
2022-32-16 18:32:05.130 [qtp904355706-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [2]
Forwarded: [proto=http;host="localhost:58193";for="127.0.0.1:58194"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58193]
X-Forwarded-Host: [localhost:58193]
Host: [localhost:12198]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [85fa8c93-16a3-43d8-ac8b-3fa4969ea349]


2022-32-16 18:32:05.149 [reactor-http-nio-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58193/savings/b/balance is routed to id: 4f877d1b-2510-4fa3-b4ea-c3b103ba78dc, uri:http://localhost:12198/balance
2022-32-16 18:32:05.152 [qtp904355706-44] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Forwarded: [proto=http;host="localhost:58193";for="127.0.0.1:58197"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [58193]
X-Forwarded-Host: [localhost:58193]
Host: [localhost:12198]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [85fa8c93-16a3-43d8-ac8b-3fa4969ea349]


2022-32-16 18:32:05.171 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@5fbae40{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12198}
2022-32-16 18:32:05.171 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@48af5f38{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13057}
2022-32-16 18:32:05.172 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@59f76e56{/,null,STOPPED}
2022-32-16 18:32:05.172 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@403f7aa2{/__admin,null,STOPPED}
2022-32-16 18:32:05.210 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-32-16 18:32:05.211 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@403f7aa2{/__admin,null,AVAILABLE}
2022-32-16 18:32:05.211 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-32-16 18:32:05.212 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@59f76e56{/,null,AVAILABLE}
2022-32-16 18:32:05.213 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5fbae40{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12198}
2022-32-16 18:32:05.213 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@5d50e7f6(wiremock,h=[tom akehurst],a=[],w=[]) for Server@26d73519[provider=null,keyStore=null,trustStore=null]
2022-32-16 18:32:05.215 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@48af5f38{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13057}
2022-32-16 18:32:05.215 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4273ms
2022-32-16 18:32:05.225 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@5fbae40{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12198}
2022-32-16 18:32:05.226 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@48af5f38{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13057}
2022-32-16 18:32:05.226 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@59f76e56{/,null,STOPPED}
2022-32-16 18:32:05.226 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@403f7aa2{/__admin,null,STOPPED}
2022-32-16 18:32:05.229 [reactor-http-nio-5] WARN  reactor.netty.http.client.HttpClientConnect - [6686d82e-1, L:/127.0.0.1:58197 ! R:localhost/127.0.0.1:58193] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-32-16 18:32:05.229 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [26fa0f5c-2, L:/127.0.0.1:58194 ! R:localhost/127.0.0.1:58193] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-02-16 19:02:47.290 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-02-16 19:02:47.294 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-02-16 19:02:47.294 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-02-16 19:02:47.333 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-02-16 19:02:47.364 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-02-16 19:02:47.368 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6050462a, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@4c0884e8, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@231baf51, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@11841b15, org.springframework.test.context.support.DirtiesContextTestExecutionListener@73877e19, org.springframework.test.context.event.EventPublishingTestExecutionListener@7b208b45, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@5bfc257, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@34523d46, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@7cedfa63, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@3e83c18, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@783efb48, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5d235104, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@4e8e8621, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@c446b14]
2022-02-16 19:02:47.521 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-02-16 19:02:47.538 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-Air with PID 37680 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-02-16 19:02:47.538 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-02-16 19:02:47.881 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=50c90c3e-267b-3791-a990-ce07de057f50
2022-02-16 19:02:48.226 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1537ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-02-16 19:02:48.340 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-02-16 19:02:48.348 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6dbbdf92{/__admin,null,AVAILABLE}
2022-02-16 19:02:48.362 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-02-16 19:02:48.362 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@11cc9e1e{/,null,AVAILABLE}
2022-02-16 19:02:48.368 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2f5f5bc9{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10934}
2022-02-16 19:02:48.372 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@6408be5(wiremock,h=[tom akehurst],a=[],w=[]) for Server@55d99dc3[provider=null,keyStore=null,trustStore=null]
2022-02-16 19:02:48.399 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@521a506c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13830}
2022-02-16 19:02:48.400 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1711ms
2022-02-16 19:02:48.689 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-02-16 19:02:48.690 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-02-16 19:02:48.943 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 58262
2022-02-16 19:02:48.962 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.577 seconds (JVM running for 2.274)
2022-02-16 19:02:49.808 [Test worker] ERROR org.springframework.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> GET http://localhost:58262/savings/a/balance
> accept-encoding: [gzip]
> user-agent: [ReactorNetty/1.0.19]
> host: [localhost:58262]
> accept: [*/*]
> WebTestClient-Request-Id: [1]

No content

< 401 UNAUTHORIZED Unauthorized
< WWW-Authenticate: [Basic realm="Realm"]
< Cache-Control: [no-cache, no-store, max-age=0, must-revalidate]
< Pragma: [no-cache]
< Expires: [0]
< X-Content-Type-Options: [nosniff]
< X-Frame-Options: [DENY]
< X-XSS-Protection: [1 ; mode=block]
< Referrer-Policy: [no-referrer]
< content-length: [0]

0 bytes of content (unknown content-type).

2022-02-16 19:02:49.818 [Test worker] ERROR org.springframework.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> GET http://localhost:58262/savings/a/balance
> accept-encoding: [gzip]
> user-agent: [ReactorNetty/1.0.19]
> host: [localhost:58262]
> accept: [*/*]
> WebTestClient-Request-Id: [2]

No content

< 401 UNAUTHORIZED Unauthorized
< WWW-Authenticate: [Basic realm="Realm"]
< Cache-Control: [no-cache, no-store, max-age=0, must-revalidate]
< Pragma: [no-cache]
< Expires: [0]
< X-Content-Type-Options: [nosniff]
< X-Frame-Options: [DENY]
< X-XSS-Protection: [1 ; mode=block]
< Referrer-Policy: [no-referrer]
< content-length: [0]

0 bytes of content (unknown content-type).

2022-02-16 19:02:49.824 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@2f5f5bc9{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10934}
2022-02-16 19:02:49.828 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@521a506c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13830}
2022-02-16 19:02:49.829 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@11cc9e1e{/,null,STOPPED}
2022-02-16 19:02:49.830 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@6dbbdf92{/__admin,null,STOPPED}
2022-02-16 19:02:49.832 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-02-16 19:02:49.837 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6dbbdf92{/__admin,null,AVAILABLE}
2022-02-16 19:02:49.839 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-02-16 19:02:49.839 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@11cc9e1e{/,null,AVAILABLE}
2022-02-16 19:02:49.843 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2f5f5bc9{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10934}
2022-02-16 19:02:49.843 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@62fa4a88(wiremock,h=[tom akehurst],a=[],w=[]) for Server@55d99dc3[provider=null,keyStore=null,trustStore=null]
2022-02-16 19:02:49.856 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@521a506c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13830}
2022-02-16 19:02:49.857 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @3169ms
2022-02-16 19:02:49.872 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@2f5f5bc9{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10934}
2022-02-16 19:02:49.872 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@521a506c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13830}
2022-02-16 19:02:49.873 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@11cc9e1e{/,null,STOPPED}
2022-02-16 19:02:49.873 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@6dbbdf92{/__admin,null,STOPPED}
2022-03-16 19:03:17.718 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-03-16 19:03:17.723 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-03-16 19:03:17.724 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-03-16 19:03:17.772 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-03-16 19:03:17.802 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-03-16 19:03:17.807 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a91d146, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@4784013e, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6f952d6c, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@5965844d, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6d4a65c6, org.springframework.test.context.event.EventPublishingTestExecutionListener@aa004a0, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@4c98a6d5, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@392a04e7, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@7f02251, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@dffa30b, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4d8126f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6d3c232f, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@6b587673, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@1bcf67e8]
2022-03-16 19:03:18.001 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-03-16 19:03:18.011 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-Air with PID 37735 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-03-16 19:03:18.012 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-03-16 19:03:18.495 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=50c90c3e-267b-3791-a990-ce07de057f50
2022-03-16 19:03:18.903 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1867ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-03-16 19:03:19.033 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-03-16 19:03:19.042 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3eee08f5{/__admin,null,AVAILABLE}
2022-03-16 19:03:19.046 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-03-16 19:03:19.046 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@13ee97af{/,null,AVAILABLE}
2022-03-16 19:03:19.053 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@6697f3d{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11618}
2022-03-16 19:03:19.055 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@4c8abec7(wiremock,h=[tom akehurst],a=[],w=[]) for Server@22899683[provider=null,keyStore=null,trustStore=null]
2022-03-16 19:03:19.075 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@40017e98{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14931}
2022-03-16 19:03:19.075 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @2039ms
2022-03-16 19:03:19.396 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-03-16 19:03:19.396 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-03-16 19:03:19.396 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-03-16 19:03:19.396 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-03-16 19:03:19.397 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-03-16 19:03:19.649 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 58271
2022-03-16 19:03:19.673 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.842 seconds (JVM running for 2.637)
2022-03-16 19:03:20.158 [Test worker] ERROR org.springframework.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> GET http://localhost:58271/savings/a/balance
> accept-encoding: [gzip]
> user-agent: [ReactorNetty/1.0.19]
> host: [localhost:58271]
> accept: [*/*]
> WebTestClient-Request-Id: [1]

No content

< 401 UNAUTHORIZED Unauthorized
< WWW-Authenticate: [Basic realm="Realm"]
< Cache-Control: [no-cache, no-store, max-age=0, must-revalidate]
< Pragma: [no-cache]
< Expires: [0]
< X-Content-Type-Options: [nosniff]
< X-Frame-Options: [DENY]
< X-XSS-Protection: [1 ; mode=block]
< Referrer-Policy: [no-referrer]
< content-length: [0]

0 bytes of content (unknown content-type).

2022-03-16 19:03:20.170 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@6697f3d{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11618}
2022-03-16 19:03:20.171 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@40017e98{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14931}
2022-03-16 19:03:20.172 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@13ee97af{/,null,STOPPED}
2022-03-16 19:03:20.172 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@3eee08f5{/__admin,null,STOPPED}
2022-03-16 19:03:20.174 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-03-16 19:03:20.175 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3eee08f5{/__admin,null,AVAILABLE}
2022-03-16 19:03:20.175 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-03-16 19:03:20.175 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@13ee97af{/,null,AVAILABLE}
2022-03-16 19:03:20.177 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@6697f3d{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11618}
2022-03-16 19:03:20.178 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@7ec5d3e1(wiremock,h=[tom akehurst],a=[],w=[]) for Server@22899683[provider=null,keyStore=null,trustStore=null]
2022-03-16 19:03:20.181 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@40017e98{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14931}
2022-03-16 19:03:20.182 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @3145ms
2022-03-16 19:03:20.198 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@6697f3d{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11618}
2022-03-16 19:03:20.199 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@40017e98{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14931}
2022-03-16 19:03:20.199 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@13ee97af{/,null,STOPPED}
2022-03-16 19:03:20.199 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@3eee08f5{/__admin,null,STOPPED}
2022-04-16 19:04:44.128 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-04-16 19:04:44.130 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-04-16 19:04:44.131 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-04-16 19:04:44.178 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-04-16 19:04:44.211 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-04-16 19:04:44.216 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3a91d146, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@4784013e, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6f952d6c, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@5965844d, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6d4a65c6, org.springframework.test.context.event.EventPublishingTestExecutionListener@aa004a0, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@4c98a6d5, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@392a04e7, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@7f02251, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@dffa30b, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@4d8126f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6d3c232f, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@6b587673, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@1bcf67e8]
2022-04-16 19:04:44.391 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-04-16 19:04:44.407 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-Air with PID 37817 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-04-16 19:04:44.408 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-04-16 19:04:44.866 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=50c90c3e-267b-3791-a990-ce07de057f50
2022-04-16 19:04:45.216 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @2749ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-04-16 19:04:45.348 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-04-16 19:04:45.360 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5b490d5e{/__admin,null,AVAILABLE}
2022-04-16 19:04:45.366 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-04-16 19:04:45.366 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6ae42248{/,null,AVAILABLE}
2022-04-16 19:04:45.371 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@cf9bd1e{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12456}
2022-04-16 19:04:45.373 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@722b3ba2(wiremock,h=[tom akehurst],a=[],w=[]) for Server@60a4e619[provider=null,keyStore=null,trustStore=null]
2022-04-16 19:04:45.418 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2bb3f39e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14714}
2022-04-16 19:04:45.419 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @2951ms
2022-04-16 19:04:45.730 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-04-16 19:04:45.730 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-04-16 19:04:45.730 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-04-16 19:04:45.730 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-04-16 19:04:45.730 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-04-16 19:04:45.730 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-04-16 19:04:45.731 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-04-16 19:04:45.731 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-04-16 19:04:45.731 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-04-16 19:04:45.731 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-04-16 19:04:45.731 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-04-16 19:04:45.731 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-04-16 19:04:45.731 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-04-16 19:04:45.731 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-04-16 19:04:45.981 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 58279
2022-04-16 19:04:46.000 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.765 seconds (JVM running for 3.532)
2022-04-16 19:04:46.622 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58279/savings/a/balance is routed to id: 68fb4b4d-1d5e-48e1-af00-e8d2c28f6680, uri:http://localhost:12456/balance
2022-04-16 19:04:46.696 [qtp904300960-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58279";for="127.0.0.1:58280"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58279]
X-Forwarded-Host: [localhost:58279]
Host: [localhost:12456]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [beb46878-aa16-4f11-ba00-10d9dc8d1803]


2022-04-16 19:04:46.793 [parallel-4] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58279/savings/b/balance is routed to id: 07a5ddaf-07a4-4a32-be24-4f6ec6a87724, uri:http://localhost:12456/balance
2022-04-16 19:04:46.796 [qtp904300960-24] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [2]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58279";for="127.0.0.1:58282"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [58279]
X-Forwarded-Host: [localhost:58279]
Host: [localhost:12456]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [beb46878-aa16-4f11-ba00-10d9dc8d1803]


2022-04-16 19:04:46.913 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@cf9bd1e{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12456}
2022-04-16 19:04:46.914 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@2bb3f39e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14714}
2022-04-16 19:04:46.915 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@6ae42248{/,null,STOPPED}
2022-04-16 19:04:46.915 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@5b490d5e{/__admin,null,STOPPED}
2022-04-16 19:04:46.916 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-04-16 19:04:46.917 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5b490d5e{/__admin,null,AVAILABLE}
2022-04-16 19:04:46.918 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-04-16 19:04:46.918 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6ae42248{/,null,AVAILABLE}
2022-04-16 19:04:46.919 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@cf9bd1e{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12456}
2022-04-16 19:04:46.919 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@57def953(wiremock,h=[tom akehurst],a=[],w=[]) for Server@60a4e619[provider=null,keyStore=null,trustStore=null]
2022-04-16 19:04:46.921 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2bb3f39e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14714}
2022-04-16 19:04:46.921 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4454ms
2022-04-16 19:04:46.930 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@cf9bd1e{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12456}
2022-04-16 19:04:46.930 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@2bb3f39e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14714}
2022-04-16 19:04:46.931 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@6ae42248{/,null,STOPPED}
2022-04-16 19:04:46.931 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@5b490d5e{/__admin,null,STOPPED}
2022-04-16 19:04:46.935 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [8d581c65-1, L:/127.0.0.1:58280 ! R:localhost/127.0.0.1:58279] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-04-16 19:04:46.935 [reactor-http-nio-6] WARN  reactor.netty.http.client.HttpClientConnect - [6475f179-1, L:/127.0.0.1:58282 ! R:localhost/127.0.0.1:58279] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-25-17 10:25:02.658 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-25-17 10:25:02.662 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-25-17 10:25:02.662 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-25-17 10:25:02.712 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-25-17 10:25:02.749 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-25-17 10:25:02.757 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3005db4a, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@425d5d46, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@198ef2ce, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@4cbd03e7, org.springframework.test.context.support.DirtiesContextTestExecutionListener@52fc5eb1, org.springframework.test.context.event.EventPublishingTestExecutionListener@7a639ec5, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@14151bc5, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3013909b, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@2a49fe, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@66596a88, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@5aae8eb5, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@76954a33, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@24a298a6, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@982bb90]
2022-25-17 10:25:04.008 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-25-17 10:25:04.025 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 41462 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-25-17 10:25:04.026 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-25-17 10:25:04.612 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=50c90c3e-267b-3791-a990-ce07de057f50
2022-25-17 10:25:05.002 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @3181ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-25-17 10:25:05.150 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-25-17 10:25:05.164 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@342723a3{/__admin,null,AVAILABLE}
2022-25-17 10:25:05.169 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-25-17 10:25:05.169 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5950054d{/,null,AVAILABLE}
2022-25-17 10:25:05.176 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@459bf87c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12301}
2022-25-17 10:25:05.180 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@361f26b4(wiremock,h=[tom akehurst],a=[],w=[]) for Server@70ee9d31[provider=null,keyStore=null,trustStore=null]
2022-25-17 10:25:05.205 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1a01ffff{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14696}
2022-25-17 10:25:05.205 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @3383ms
2022-25-17 10:25:06.295 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-25-17 10:25:06.531 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-25-17 10:25:06.531 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-25-17 10:25:06.532 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-25-17 10:25:07.695 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-25-17 10:25:07.836 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 57930
2022-25-17 10:25:08.843 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-25-17 10:25:09.853 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-25-17 10:25:09.890 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 7.111 seconds (JVM running for 8.069)
2022-25-17 10:25:10.534 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:57930/savings/a/balance is routed to id: 78951386-11c6-4e94-9421-a55e813805b0, uri:http://localhost:12301/balance
2022-25-17 10:25:10.612 [qtp683495445-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:57930";for="127.0.0.1:57961"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [57930]
X-Forwarded-Host: [localhost:57930]
Host: [localhost:12301]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [baaaf091-1a35-4a2b-b0fa-7a8ff8522f9e]


2022-25-17 10:25:11.790 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:57930/savings/a/balance is routed to id: 78951386-11c6-4e94-9421-a55e813805b0, uri:http://localhost:12301/balance
2022-25-17 10:25:11.800 [qtp683495445-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:57930";for="127.0.0.1:57961"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [57930]
X-Forwarded-Host: [localhost:57930]
Host: [localhost:12301]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [4b079de3-c807-466e-80b4-694d4f6b8ab4]


2022-25-17 10:25:11.900 [parallel-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:57930/savings/b/balance is routed to id: a10fb087-272e-4475-8ba9-30997f171311, uri:http://localhost:12301/balance
2022-25-17 10:25:11.903 [qtp683495445-47] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:57930";for="127.0.0.1:57980"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [57930]
X-Forwarded-Host: [localhost:57930]
Host: [localhost:12301]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [4b079de3-c807-466e-80b4-694d4f6b8ab4]


2022-25-17 10:25:12.012 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@459bf87c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12301}
2022-25-17 10:25:12.013 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@1a01ffff{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14696}
2022-25-17 10:25:12.014 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@5950054d{/,null,STOPPED}
2022-25-17 10:25:12.014 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@342723a3{/__admin,null,STOPPED}
2022-25-17 10:25:12.015 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-25-17 10:25:12.016 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@342723a3{/__admin,null,AVAILABLE}
2022-25-17 10:25:12.017 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-25-17 10:25:12.017 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5950054d{/,null,AVAILABLE}
2022-25-17 10:25:12.018 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@459bf87c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12301}
2022-25-17 10:25:12.018 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@174d5cf7(wiremock,h=[tom akehurst],a=[],w=[]) for Server@70ee9d31[provider=null,keyStore=null,trustStore=null]
2022-25-17 10:25:12.023 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1a01ffff{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14696}
2022-25-17 10:25:12.024 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10202ms
2022-25-17 10:25:12.034 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@459bf87c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12301}
2022-25-17 10:25:12.035 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@1a01ffff{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14696}
2022-25-17 10:25:12.035 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@5950054d{/,null,STOPPED}
2022-25-17 10:25:12.035 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@342723a3{/__admin,null,STOPPED}
2022-25-17 10:25:12.039 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [6506f34d-3, L:/127.0.0.1:57961 ! R:localhost/127.0.0.1:57930] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-25-17 10:25:12.039 [reactor-http-nio-7] WARN  reactor.netty.http.client.HttpClientConnect - [78420ba8-1, L:/127.0.0.1:57980 ! R:localhost/127.0.0.1:57930] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-25-17 10:25:20.671 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-25-17 10:25:20.674 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-25-17 10:25:20.676 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-25-17 10:25:20.736 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-25-17 10:25:20.775 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-25-17 10:25:20.781 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@73877e19, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@7b208b45, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@5bfc257, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@34523d46, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7cedfa63, org.springframework.test.context.event.EventPublishingTestExecutionListener@3e83c18, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@783efb48, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@5d235104, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@4e8e8621, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@c446b14, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@3af356f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@4443ef6f, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@7e46d648, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@51751e5f]
2022-25-17 10:25:20.944 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-25-17 10:25:20.964 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 41506 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-25-17 10:25:20.965 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-25-17 10:25:21.385 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=50c90c3e-267b-3791-a990-ce07de057f50
2022-25-17 10:25:21.766 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1761ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-25-17 10:25:21.905 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-25-17 10:25:21.921 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@628b503a{/__admin,null,AVAILABLE}
2022-25-17 10:25:21.937 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-25-17 10:25:21.937 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@35454c7a{/,null,AVAILABLE}
2022-25-17 10:25:21.945 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1c7843c3{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10073}
2022-25-17 10:25:21.948 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@69a76b74(wiremock,h=[tom akehurst],a=[],w=[]) for Server@d7055be[provider=null,keyStore=null,trustStore=null]
2022-25-17 10:25:21.970 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@768f4b42{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12890}
2022-25-17 10:25:21.970 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1966ms
2022-25-17 10:25:22.338 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-25-17 10:25:22.342 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-25-17 10:25:22.343 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-25-17 10:25:22.343 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-25-17 10:25:22.343 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-25-17 10:25:22.343 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-25-17 10:25:22.744 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 58111
2022-25-17 10:25:22.766 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.964 seconds (JVM running for 2.762)
2022-25-17 10:25:23.314 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58111/savings/a/balance is routed to id: f35a630e-2c5b-40e5-8dc8-220fce114f86, uri:http://localhost:10073/balance
2022-25-17 10:25:23.386 [qtp1682050612-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58111";for="127.0.0.1:58118"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58111]
X-Forwarded-Host: [localhost:58111]
Host: [localhost:10073]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [47f5f934-f1ae-4aba-84c5-1665c3f2571e]


2022-25-17 10:25:24.569 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58111/savings/a/balance is routed to id: f35a630e-2c5b-40e5-8dc8-220fce114f86, uri:http://localhost:10073/balance
2022-25-17 10:25:24.575 [qtp1682050612-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58111";for="127.0.0.1:58118"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58111]
X-Forwarded-Host: [localhost:58111]
Host: [localhost:10073]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [20f9e6b0-421b-4963-a085-ca0935be31f1]


2022-25-17 10:25:24.677 [parallel-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58111/savings/b/balance is routed to id: dd52770e-4b40-40be-9147-b79f0394600f, uri:http://localhost:10073/balance
2022-25-17 10:25:24.679 [qtp1682050612-47] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58111";for="127.0.0.1:58137"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [58111]
X-Forwarded-Host: [localhost:58111]
Host: [localhost:10073]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [20f9e6b0-421b-4963-a085-ca0935be31f1]


2022-25-17 10:25:24.776 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@1c7843c3{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10073}
2022-25-17 10:25:24.777 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@768f4b42{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12890}
2022-25-17 10:25:24.778 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@35454c7a{/,null,STOPPED}
2022-25-17 10:25:24.778 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@628b503a{/__admin,null,STOPPED}
2022-25-17 10:25:24.780 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-25-17 10:25:24.781 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@628b503a{/__admin,null,AVAILABLE}
2022-25-17 10:25:24.781 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-25-17 10:25:24.781 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@35454c7a{/,null,AVAILABLE}
2022-25-17 10:25:24.782 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1c7843c3{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10073}
2022-25-17 10:25:24.783 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@383a5260(wiremock,h=[tom akehurst],a=[],w=[]) for Server@d7055be[provider=null,keyStore=null,trustStore=null]
2022-25-17 10:25:24.786 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@768f4b42{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12890}
2022-25-17 10:25:24.786 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4782ms
2022-25-17 10:25:24.795 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@1c7843c3{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10073}
2022-25-17 10:25:24.796 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@768f4b42{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12890}
2022-25-17 10:25:24.796 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@35454c7a{/,null,STOPPED}
2022-25-17 10:25:24.796 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@628b503a{/__admin,null,STOPPED}
2022-25-17 10:25:24.799 [reactor-http-nio-7] WARN  reactor.netty.http.client.HttpClientConnect - [6d27c3c2-1, L:/127.0.0.1:58137 ! R:localhost/127.0.0.1:58111] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-25-17 10:25:24.799 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [b261b4d5-3, L:/127.0.0.1:58118 ! R:localhost/127.0.0.1:58111] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-25-17 10:25:53.692 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-25-17 10:25:53.695 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-25-17 10:25:53.695 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-25-17 10:25:53.745 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-25-17 10:25:53.778 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-25-17 10:25:53.783 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6d4a65c6, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@aa004a0, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@4c98a6d5, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@392a04e7, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7f02251, org.springframework.test.context.event.EventPublishingTestExecutionListener@dffa30b, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@4d8126f, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@6d3c232f, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6b587673, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@1bcf67e8, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@5f404594, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@53692008, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@7b2a3ff8, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@1bbae752]
2022-25-17 10:25:53.926 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-25-17 10:25:53.941 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 41562 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-25-17 10:25:53.942 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-25-17 10:25:54.359 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=50c90c3e-267b-3791-a990-ce07de057f50
2022-25-17 10:25:54.718 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1712ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-25-17 10:25:54.848 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-25-17 10:25:54.861 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2abedbbd{/__admin,null,AVAILABLE}
2022-25-17 10:25:54.868 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-25-17 10:25:54.868 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@341ccfd1{/,null,AVAILABLE}
2022-25-17 10:25:54.875 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@3a72e2e8{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10857}
2022-25-17 10:25:54.877 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@f36f34d(wiremock,h=[tom akehurst],a=[],w=[]) for Server@4fbe486c[provider=null,keyStore=null,trustStore=null]
2022-25-17 10:25:54.904 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@dbc7e0a{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13043}
2022-25-17 10:25:54.904 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1898ms
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-25-17 10:25:55.227 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-25-17 10:25:55.228 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-25-17 10:25:55.228 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-25-17 10:25:55.228 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-25-17 10:25:55.228 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-25-17 10:25:55.228 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-25-17 10:25:55.484 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 58509
2022-25-17 10:25:55.511 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.708 seconds (JVM running for 2.505)
2022-25-17 10:25:55.952 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58509/savings/a/balance is routed to id: 636f626d-6cb6-48f6-9e9b-595109d03289, uri:http://localhost:10857/balance
2022-25-17 10:25:56.040 [qtp1346009488-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58509";for="127.0.0.1:58513"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58509]
X-Forwarded-Host: [localhost:58509]
Host: [localhost:10857]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [2a5f6b6b-8dde-4aca-8d1a-f3a390d08eda]


2022-25-17 10:25:57.042 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@3a72e2e8{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10857}
2022-25-17 10:25:57.044 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@dbc7e0a{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13043}
2022-25-17 10:25:57.045 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@341ccfd1{/,null,STOPPED}
2022-25-17 10:25:57.045 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@2abedbbd{/__admin,null,STOPPED}
2022-25-17 10:25:57.150 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-25-17 10:25:57.151 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2abedbbd{/__admin,null,AVAILABLE}
2022-25-17 10:25:57.152 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-25-17 10:25:57.152 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@341ccfd1{/,null,AVAILABLE}
2022-25-17 10:25:57.153 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@3a72e2e8{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10857}
2022-25-17 10:25:57.153 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@174d5cf7(wiremock,h=[tom akehurst],a=[],w=[]) for Server@4fbe486c[provider=null,keyStore=null,trustStore=null]
2022-25-17 10:25:57.156 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@dbc7e0a{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13043}
2022-25-17 10:25:57.156 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4150ms
2022-25-17 10:25:57.166 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@3a72e2e8{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10857}
2022-25-17 10:25:57.167 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@dbc7e0a{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13043}
2022-25-17 10:25:57.167 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@341ccfd1{/,null,STOPPED}
2022-25-17 10:25:57.167 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@2abedbbd{/__admin,null,STOPPED}
2022-26-17 10:26:23.625 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-26-17 10:26:23.628 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-26-17 10:26:23.629 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-26-17 10:26:23.677 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-26-17 10:26:23.710 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-26-17 10:26:23.715 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@73877e19, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@7b208b45, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@5bfc257, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@34523d46, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7cedfa63, org.springframework.test.context.event.EventPublishingTestExecutionListener@3e83c18, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@783efb48, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@5d235104, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@4e8e8621, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@c446b14, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@3af356f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@4443ef6f, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@7e46d648, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@51751e5f]
2022-26-17 10:26:23.859 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-26-17 10:26:23.876 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 41623 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-26-17 10:26:23.876 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-26-17 10:26:24.277 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=50c90c3e-267b-3791-a990-ce07de057f50
2022-26-17 10:26:24.617 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1510ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-26-17 10:26:24.738 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-26-17 10:26:24.747 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@11c3ce6a{/__admin,null,AVAILABLE}
2022-26-17 10:26:24.752 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-26-17 10:26:24.752 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@319aa9ee{/,null,AVAILABLE}
2022-26-17 10:26:24.757 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7c8f047a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11863}
2022-26-17 10:26:24.759 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@2aafa84f(wiremock,h=[tom akehurst],a=[],w=[]) for Server@12a6e8ed[provider=null,keyStore=null,trustStore=null]
2022-26-17 10:26:24.777 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@63b4b9c6{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13183}
2022-26-17 10:26:24.777 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1670ms
2022-26-17 10:26:25.070 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-26-17 10:26:25.070 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-26-17 10:26:25.070 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-26-17 10:26:25.070 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-26-17 10:26:25.070 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-26-17 10:26:25.070 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-26-17 10:26:25.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-26-17 10:26:25.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-26-17 10:26:25.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-26-17 10:26:25.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-26-17 10:26:25.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-26-17 10:26:25.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-26-17 10:26:25.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-26-17 10:26:25.071 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-26-17 10:26:25.326 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 58863
2022-26-17 10:26:25.347 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.612 seconds (JVM running for 2.24)
2022-26-17 10:26:25.789 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58863/savings/a/balance is routed to id: 48408855-9e3e-46c2-bbb4-4f1893d8064a, uri:http://localhost:11863/balance
2022-26-17 10:26:25.868 [qtp844008362-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58863";for="127.0.0.1:58867"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58863]
X-Forwarded-Host: [localhost:58863]
Host: [localhost:11863]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [66c91313-95df-4ca0-9ba9-edf5140997d5]


2022-26-17 10:26:27.021 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58863/savings/a/balance is routed to id: 48408855-9e3e-46c2-bbb4-4f1893d8064a, uri:http://localhost:11863/balance
2022-26-17 10:26:27.027 [qtp844008362-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58863";for="127.0.0.1:58867"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58863]
X-Forwarded-Host: [localhost:58863]
Host: [localhost:11863]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [56768898-ee40-40dc-83f4-4139e681036c]


2022-26-17 10:26:27.120 [parallel-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58863/savings/b/balance is routed to id: f75d67d0-c03a-4dd5-8ff0-87c4874b441d, uri:http://localhost:11863/balance
2022-26-17 10:26:27.122 [qtp844008362-47] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58863";for="127.0.0.1:58887"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [58863]
X-Forwarded-Host: [localhost:58863]
Host: [localhost:11863]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [56768898-ee40-40dc-83f4-4139e681036c]


2022-26-17 10:26:27.223 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7c8f047a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11863}
2022-26-17 10:26:27.225 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@63b4b9c6{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13183}
2022-26-17 10:26:27.225 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@319aa9ee{/,null,STOPPED}
2022-26-17 10:26:27.226 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@11c3ce6a{/__admin,null,STOPPED}
2022-26-17 10:26:27.228 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-26-17 10:26:27.229 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@11c3ce6a{/__admin,null,AVAILABLE}
2022-26-17 10:26:27.230 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-26-17 10:26:27.230 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@319aa9ee{/,null,AVAILABLE}
2022-26-17 10:26:27.231 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7c8f047a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11863}
2022-26-17 10:26:27.232 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@751526a7(wiremock,h=[tom akehurst],a=[],w=[]) for Server@12a6e8ed[provider=null,keyStore=null,trustStore=null]
2022-26-17 10:26:27.235 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@63b4b9c6{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13183}
2022-26-17 10:26:27.236 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4128ms
2022-26-17 10:26:27.249 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7c8f047a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11863}
2022-26-17 10:26:27.250 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@63b4b9c6{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13183}
2022-26-17 10:26:27.250 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@319aa9ee{/,null,STOPPED}
2022-26-17 10:26:27.251 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@11c3ce6a{/__admin,null,STOPPED}
2022-26-17 10:26:27.254 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [85de5988-3, L:/127.0.0.1:58867 ! R:localhost/127.0.0.1:58863] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-26-17 10:26:27.254 [reactor-http-nio-7] WARN  reactor.netty.http.client.HttpClientConnect - [b07f92dd-1, L:/127.0.0.1:58887 ! R:localhost/127.0.0.1:58863] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-49-17 10:49:55.499 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-49-17 10:49:55.502 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-49-17 10:49:55.503 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-49-17 10:49:55.543 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-49-17 10:49:55.575 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-49-17 10:49:55.579 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@73877e19, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@7b208b45, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@5bfc257, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@34523d46, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7cedfa63, org.springframework.test.context.event.EventPublishingTestExecutionListener@3e83c18, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@783efb48, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@5d235104, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@4e8e8621, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@c446b14, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@3af356f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@4443ef6f, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@7e46d648, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@51751e5f]
2022-49-17 10:49:56.764 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-49-17 10:49:56.780 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 43278 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-49-17 10:49:56.781 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-49-17 10:49:57.141 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=50c90c3e-267b-3791-a990-ce07de057f50
2022-49-17 10:49:57.473 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @2548ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-49-17 10:49:57.592 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-49-17 10:49:57.600 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@dbc7e0a{/__admin,null,AVAILABLE}
2022-49-17 10:49:57.605 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-49-17 10:49:57.605 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3514ac7d{/,null,AVAILABLE}
2022-49-17 10:49:57.611 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7079f8f0{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11332}
2022-49-17 10:49:57.614 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@7ef60c02(wiremock,h=[tom akehurst],a=[],w=[]) for Server@3c7d8a4[provider=null,keyStore=null,trustStore=null]
2022-49-17 10:49:57.643 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5996d6f2{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14180}
2022-49-17 10:49:57.643 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @2718ms
2022-49-17 10:49:58.730 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-49-17 10:49:58.952 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-49-17 10:49:58.953 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-49-17 10:49:58.954 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-49-17 10:49:58.954 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-49-17 10:49:58.954 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-49-17 10:49:58.954 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-50-17 10:50:00.097 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-50-17 10:50:00.219 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 58944
2022-50-17 10:50:01.226 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-50-17 10:50:02.230 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-50-17 10:50:02.255 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 6.658 seconds (JVM running for 7.33)
2022-50-17 10:50:02.875 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58944/savings/a/balance is routed to id: 09d64a5d-5385-4cf7-8e6a-2e0de33cd3ba, uri:http://localhost:11332/balance
2022-50-17 10:50:02.949 [qtp1140684760-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58944";for="127.0.0.1:58975"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58944]
X-Forwarded-Host: [localhost:58944]
Host: [localhost:11332]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [fa4511a2-7bf3-4e85-b475-8074a416a7b4]


2022-50-17 10:50:04.124 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58944/savings/a/balance is routed to id: 09d64a5d-5385-4cf7-8e6a-2e0de33cd3ba, uri:http://localhost:11332/balance
2022-50-17 10:50:04.128 [qtp1140684760-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58944";for="127.0.0.1:58975"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [58944]
X-Forwarded-Host: [localhost:58944]
Host: [localhost:11332]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [6d573435-ce60-4257-9e50-c66d3ffbc855]


2022-50-17 10:50:04.218 [parallel-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:58944/savings/b/balance is routed to id: 6c258755-4425-4c6e-b752-3537f8eaf185, uri:http://localhost:11332/balance
2022-50-17 10:50:04.224 [qtp1140684760-47] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:58944";for="127.0.0.1:58994"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [58944]
X-Forwarded-Host: [localhost:58944]
Host: [localhost:11332]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [6d573435-ce60-4257-9e50-c66d3ffbc855]


2022-50-17 10:50:04.323 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7079f8f0{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11332}
2022-50-17 10:50:04.323 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@5996d6f2{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14180}
2022-50-17 10:50:04.324 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@3514ac7d{/,null,STOPPED}
2022-50-17 10:50:04.324 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@dbc7e0a{/__admin,null,STOPPED}
2022-50-17 10:50:04.326 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-50-17 10:50:04.327 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@dbc7e0a{/__admin,null,AVAILABLE}
2022-50-17 10:50:04.328 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-50-17 10:50:04.328 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3514ac7d{/,null,AVAILABLE}
2022-50-17 10:50:04.329 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7079f8f0{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11332}
2022-50-17 10:50:04.329 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@58829c2c(wiremock,h=[tom akehurst],a=[],w=[]) for Server@3c7d8a4[provider=null,keyStore=null,trustStore=null]
2022-50-17 10:50:04.331 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5996d6f2{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14180}
2022-50-17 10:50:04.331 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @9407ms
2022-50-17 10:50:04.342 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7079f8f0{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11332}
2022-50-17 10:50:04.343 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@5996d6f2{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14180}
2022-50-17 10:50:04.343 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@3514ac7d{/,null,STOPPED}
2022-50-17 10:50:04.343 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@dbc7e0a{/__admin,null,STOPPED}
2022-50-17 10:50:04.346 [reactor-http-nio-7] WARN  reactor.netty.http.client.HttpClientConnect - [a212c88f-1, L:/127.0.0.1:58994 ! R:localhost/127.0.0.1:58944] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-50-17 10:50:04.346 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [35d50d61-3, L:/127.0.0.1:58975 ! R:localhost/127.0.0.1:58944] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-25-17 11:25:34.876 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-25-17 11:25:34.880 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-25-17 11:25:34.880 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-25-17 11:25:34.930 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-25-17 11:25:34.966 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-25-17 11:25:34.971 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@749f539e, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5ca1f591, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@551de37d, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6ef81f31, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6075b2d3, org.springframework.test.context.event.EventPublishingTestExecutionListener@33abde31, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@997d532, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@273842a6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6a969fb8, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@7a18e8d, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@3028e50e, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5560bcdf, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@b558294, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@bb095]
2022-25-17 11:25:36.190 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-25-17 11:25:36.213 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45680 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-25-17 11:25:36.214 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-25-17 11:25:36.854 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-25-17 11:25:37.330 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @3350ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-25-17 11:25:37.460 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-25-17 11:25:37.472 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4db6348b{/__admin,null,AVAILABLE}
2022-25-17 11:25:37.478 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-25-17 11:25:37.478 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5341641d{/,null,AVAILABLE}
2022-25-17 11:25:37.485 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5909ae90{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10549}
2022-25-17 11:25:37.488 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@40b54762(wiremock,h=[tom akehurst],a=[],w=[]) for Server@39514976[provider=null,keyStore=null,trustStore=null]
2022-25-17 11:25:37.516 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7bdb4f17{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14414}
2022-25-17 11:25:37.516 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @3537ms
2022-25-17 11:25:38.662 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-25-17 11:25:38.901 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-25-17 11:25:38.909 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-25-17 11:25:38.909 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-25-17 11:25:38.910 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-25-17 11:25:38.911 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-25-17 11:25:38.911 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-25-17 11:25:40.028 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-25-17 11:25:40.166 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 51705
2022-25-17 11:25:41.173 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-25-17 11:25:42.178 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-25-17 11:25:42.216 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 7.2 seconds (JVM running for 8.237)
2022-25-17 11:25:43.060 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51705/savings/a/balance is routed to id: 0cda6382-bd90-49d3-98d7-c805e49a51d0, uri:http://localhost:10549/balance
2022-25-17 11:25:43.131 [qtp66853567-48] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51705";for="127.0.0.1:51706"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51705]
X-Forwarded-Host: [localhost:51705]
Host: [localhost:10549]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [e551ff78-2786-4377-91b7-cd51bd3e8557]


2022-25-17 11:25:44.157 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51705/savings/b/balance is routed to id: ae8102bb-ae94-4d2d-afae-eaf048307443, uri:http://localhost:10549/balance
2022-25-17 11:25:44.168 [qtp66853567-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [2]
Authorization: [Basic dXNlcjppbmNvcnJlY3RfcGFzcw==]
Forwarded: [proto=http;host="localhost:51705";for="127.0.0.1:51706"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [51705]
X-Forwarded-Host: [localhost:51705]
Host: [localhost:10549]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [e551ff78-2786-4377-91b7-cd51bd3e8557]


2022-25-17 11:25:45.170 [Test worker] ERROR org.springframework.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> GET http://localhost:51705/savings/b/balance
> accept-encoding: [gzip]
> user-agent: [ReactorNetty/1.0.19]
> host: [localhost:51705]
> accept: [*/*]
> WebTestClient-Request-Id: [2]
> Authorization: [Basic dXNlcjppbmNvcnJlY3RfcGFzcw==]

No content

< 504 GATEWAY_TIMEOUT Gateway Timeout
< Content-Type: [application/json]
< Cache-Control: [no-cache, no-store, max-age=0, must-revalidate]
< Pragma: [no-cache]
< Expires: [0]
< X-Content-Type-Options: [nosniff]
< X-Frame-Options: [DENY]
< X-XSS-Protection: [1 ; mode=block]
< Referrer-Policy: [no-referrer]
< content-length: [137]

{"timestamp":"2022-06-17T09:25:45.163+00:00","path":"/savings/b/balance","status":504,"error":"Gateway Timeout","requestId":"00a9d22f-2"}

2022-25-17 11:25:45.180 [parallel-5] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51705/savings/a/balance is routed to id: 0cda6382-bd90-49d3-98d7-c805e49a51d0, uri:http://localhost:10549/balance
2022-25-17 11:25:45.187 [qtp66853567-24] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51705";for="127.0.0.1:51706"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51705]
X-Forwarded-Host: [localhost:51705]
Host: [localhost:10549]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [29c3c628-a576-4264-b22c-55120486737d]


2022-25-17 11:25:45.214 [parallel-8] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51705/savings/b/balance is routed to id: ae8102bb-ae94-4d2d-afae-eaf048307443, uri:http://localhost:10549/balance
2022-25-17 11:25:45.221 [qtp66853567-51] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51705";for="127.0.0.1:51710"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [51705]
X-Forwarded-Host: [localhost:51705]
Host: [localhost:10549]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [29c3c628-a576-4264-b22c-55120486737d]


2022-25-17 11:25:45.253 [parallel-4] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51705/savings/b/balance is routed to id: ae8102bb-ae94-4d2d-afae-eaf048307443, uri:http://localhost:10549/balance
2022-25-17 11:25:45.269 [qtp66853567-48] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [6]
Forwarded: [proto=http;host="localhost:51705";for="127.0.0.1:51710"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [51705]
X-Forwarded-Host: [localhost:51705]
Host: [localhost:10549]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [29c3c628-a576-4264-b22c-55120486737d]


2022-25-17 11:25:45.274 [Test worker] ERROR org.springframework.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> GET http://localhost:51705/savings/b/balance
> accept-encoding: [gzip]
> user-agent: [ReactorNetty/1.0.19]
> host: [localhost:51705]
> accept: [*/*]
> WebTestClient-Request-Id: [6]

No content

< 200 OK OK
< transfer-encoding: [chunked]
< Matched-Stub-Id: [29c3c628-a576-4264-b22c-55120486737d]
< Vary: [Accept-Encoding, User-Agent]
< Cache-Control: [no-cache, no-store, max-age=0, must-revalidate]
< Pragma: [no-cache]
< Expires: [0]
< X-Content-Type-Options: [nosniff]
< X-Frame-Options: [DENY]
< X-XSS-Protection: [1 ; mode=block]
< Referrer-Policy: [no-referrer]

17 bytes of content (unknown content-type).

2022-25-17 11:25:45.285 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@5909ae90{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10549}
2022-25-17 11:25:45.289 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7bdb4f17{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14414}
2022-25-17 11:25:45.291 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@5341641d{/,null,STOPPED}
2022-25-17 11:25:45.291 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@4db6348b{/__admin,null,STOPPED}
2022-25-17 11:25:45.295 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-25-17 11:25:45.298 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4db6348b{/__admin,null,AVAILABLE}
2022-25-17 11:25:45.300 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-25-17 11:25:45.301 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5341641d{/,null,AVAILABLE}
2022-25-17 11:25:45.303 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5909ae90{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10549}
2022-25-17 11:25:45.304 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@455cb6d9(wiremock,h=[tom akehurst],a=[],w=[]) for Server@39514976[provider=null,keyStore=null,trustStore=null]
2022-25-17 11:25:45.309 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7bdb4f17{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14414}
2022-25-17 11:25:45.310 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @11331ms
2022-25-17 11:25:45.344 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@5909ae90{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10549}
2022-25-17 11:25:45.345 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7bdb4f17{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14414}
2022-25-17 11:25:45.345 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@5341641d{/,null,STOPPED}
2022-25-17 11:25:45.346 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@4db6348b{/__admin,null,STOPPED}
2022-25-17 11:25:45.350 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [dd62b1a8-3, L:/127.0.0.1:51706 ! R:localhost/127.0.0.1:51705] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-27-17 11:27:41.173 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-27-17 11:27:41.177 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-27-17 11:27:41.177 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-27-17 11:27:41.228 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-27-17 11:27:41.263 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-27-17 11:27:41.268 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@551de37d, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@6ef81f31, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6075b2d3, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31, org.springframework.test.context.support.DirtiesContextTestExecutionListener@997d532, org.springframework.test.context.event.EventPublishingTestExecutionListener@273842a6, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6a969fb8, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7a18e8d, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@3028e50e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5560bcdf, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@b558294, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@bb095, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@777c350f, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@27aae97b]
2022-27-17 11:27:42.522 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-27-17 11:27:42.538 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:42.539 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:43.193 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:43.568 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @3214ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-27-17 11:27:43.696 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:43.709 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3c4059a{/__admin,null,AVAILABLE}
2022-27-17 11:27:43.714 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:43.714 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4345fd45{/,null,AVAILABLE}
2022-27-17 11:27:43.721 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4f20b022{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10887}
2022-27-17 11:27:43.724 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@452ec287(wiremock,h=[tom akehurst],a=[],w=[]) for Server@66a472b9[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:43.752 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@428eb3d5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14173}
2022-27-17 11:27:43.752 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @3398ms
2022-27-17 11:27:43.755 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:43.775 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:44.816 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:44.817 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:44.889 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:44.925 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:44.927 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3bc6c10f{/__admin,null,AVAILABLE}
2022-27-17 11:27:44.928 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:44.928 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2e013ba1{/,null,AVAILABLE}
2022-27-17 11:27:44.929 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1f521c69{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10827}
2022-27-17 11:27:44.930 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@1c79d093(wiremock,h=[tom akehurst],a=[],w=[]) for Server@2d8087da[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:44.933 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4f7ef948{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14377}
2022-27-17 11:27:44.933 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4579ms
2022-27-17 11:27:44.934 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:44.938 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:45.984 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:45.985 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:46.058 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:46.086 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:46.087 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@20a4cba7{/__admin,null,AVAILABLE}
2022-27-17 11:27:46.087 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:46.087 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3d405fe5{/,null,AVAILABLE}
2022-27-17 11:27:46.089 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4eb5764d{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10045}
2022-27-17 11:27:46.089 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@48333b12(wiremock,h=[tom akehurst],a=[],w=[]) for Server@516037be[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:46.092 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@383e6734{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14587}
2022-27-17 11:27:46.093 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @5739ms
2022-27-17 11:27:46.094 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:46.098 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:46.098 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@74231642]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-27-17 11:27:47.150 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:47.150 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:47.220 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:47.246 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:47.247 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3a45308f{/__admin,null,AVAILABLE}
2022-27-17 11:27:47.248 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:47.248 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@56554365{/,null,AVAILABLE}
2022-27-17 11:27:47.249 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@3c9971af{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11534}
2022-27-17 11:27:47.250 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@6e6f5842(wiremock,h=[tom akehurst],a=[],w=[]) for Server@52b891de[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:47.252 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4ae6451d{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13263}
2022-27-17 11:27:47.252 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @6898ms
2022-27-17 11:27:47.253 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:47.257 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:48.307 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:48.310 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:48.399 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:48.426 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:48.428 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5d84b088{/__admin,null,AVAILABLE}
2022-27-17 11:27:48.428 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:48.428 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2c2edbe7{/,null,AVAILABLE}
2022-27-17 11:27:48.429 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@65698020{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11516}
2022-27-17 11:27:48.430 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@27575bcd(wiremock,h=[tom akehurst],a=[],w=[]) for Server@29fc83c5[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:48.432 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@3fb1948c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14747}
2022-27-17 11:27:48.432 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @8078ms
2022-27-17 11:27:48.433 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:48.440 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:48.440 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@5cf33d25]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-27-17 11:27:49.485 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:49.486 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:49.544 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:49.568 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:49.569 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@658098a2{/__admin,null,AVAILABLE}
2022-27-17 11:27:49.569 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:49.569 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@755009f2{/,null,AVAILABLE}
2022-27-17 11:27:49.570 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@45c2c396{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11386}
2022-27-17 11:27:49.570 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@1d7af82(wiremock,h=[tom akehurst],a=[],w=[]) for Server@297454f7[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:49.573 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@602b7944{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14739}
2022-27-17 11:27:49.573 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @9219ms
2022-27-17 11:27:49.574 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:49.577 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:50.591 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:50.592 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:50.651 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:50.672 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:50.672 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@24536f07{/__admin,null,AVAILABLE}
2022-27-17 11:27:50.673 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:50.673 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@786cc1df{/,null,AVAILABLE}
2022-27-17 11:27:50.674 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@22e1a1dc{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11978}
2022-27-17 11:27:50.674 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@3b80bb63(wiremock,h=[tom akehurst],a=[],w=[]) for Server@5ab3f611[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:50.676 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@33425171{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13616}
2022-27-17 11:27:50.676 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10322ms
2022-27-17 11:27:50.677 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:50.680 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:50.680 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@35c95869]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-27-17 11:27:50.703 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:50.704 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:50.751 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:50.772 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:50.773 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4a977146{/__admin,null,AVAILABLE}
2022-27-17 11:27:50.773 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:50.773 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2e51ede1{/,null,AVAILABLE}
2022-27-17 11:27:50.774 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1d4e06bb{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10830}
2022-27-17 11:27:50.775 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@24fc9aa5(wiremock,h=[tom akehurst],a=[],w=[]) for Server@451cef67[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:50.776 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@11fb1691{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14866}
2022-27-17 11:27:50.777 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10423ms
2022-27-17 11:27:50.777 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:50.781 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:50.798 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:50.799 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:50.851 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:50.875 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:50.876 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7ca7bddd{/__admin,null,AVAILABLE}
2022-27-17 11:27:50.877 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:50.877 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@34a99d8{/,null,AVAILABLE}
2022-27-17 11:27:50.878 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7d49fe37{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11525}
2022-27-17 11:27:50.878 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@5c9168c3(wiremock,h=[tom akehurst],a=[],w=[]) for Server@5039c2cf[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:50.880 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@355b4c34{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13653}
2022-27-17 11:27:50.880 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10526ms
2022-27-17 11:27:50.881 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:50.884 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-27-17 11:27:50.884 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@62ff14cd]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-27-17 11:27:50.904 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45815 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-27-17 11:27:50.904 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-27-17 11:27:50.949 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-27-17 11:27:50.975 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-27-17 11:27:50.976 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@36570936{/__admin,null,AVAILABLE}
2022-27-17 11:27:50.976 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-27-17 11:27:50.976 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5b5f61cc{/,null,AVAILABLE}
2022-27-17 11:27:50.977 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@27ea552d{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10060}
2022-27-17 11:27:50.977 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@4e3c0627(wiremock,h=[tom akehurst],a=[],w=[]) for Server@43c64d6f[provider=null,keyStore=null,trustStore=null]
2022-27-17 11:27:50.979 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@6b247ef6{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14048}
2022-27-17 11:27:50.979 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10625ms
2022-27-17 11:27:50.980 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-27-17 11:27:50.983 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:12.742 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-29-17 11:29:12.745 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-29-17 11:29:12.745 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-29-17 11:29:12.790 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-29-17 11:29:12.821 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-29-17 11:29:12.825 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@551de37d, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@6ef81f31, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6075b2d3, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31, org.springframework.test.context.support.DirtiesContextTestExecutionListener@997d532, org.springframework.test.context.event.EventPublishingTestExecutionListener@273842a6, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6a969fb8, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7a18e8d, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@3028e50e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5560bcdf, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@b558294, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@bb095, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@777c350f, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@27aae97b]
2022-29-17 11:29:14.011 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-29-17 11:29:14.025 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:14.026 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:14.457 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:14.837 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @2614ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-29-17 11:29:14.973 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:14.981 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@18b04526{/__admin,null,AVAILABLE}
2022-29-17 11:29:14.986 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:14.986 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@54941dfd{/,null,AVAILABLE}
2022-29-17 11:29:14.991 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@e0847a9{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10008}
2022-29-17 11:29:14.994 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@6d80e411(wiremock,h=[tom akehurst],a=[],w=[]) for Server@2558f65c[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:15.016 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@11c3ce6a{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14745}
2022-29-17 11:29:15.016 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @2793ms
2022-29-17 11:29:15.023 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:15.115 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:15.134 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:16.188 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:16.188 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:16.269 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:16.303 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:16.304 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@35260785{/__admin,null,AVAILABLE}
2022-29-17 11:29:16.304 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:16.304 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@47d81427{/,null,AVAILABLE}
2022-29-17 11:29:16.306 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@34eb5d01{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12143}
2022-29-17 11:29:16.306 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@1de6dc80(wiremock,h=[tom akehurst],a=[],w=[]) for Server@29db008c[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:16.309 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1d008e61{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13866}
2022-29-17 11:29:16.309 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4086ms
2022-29-17 11:29:16.310 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:16.389 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:16.393 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:17.443 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:17.444 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:17.511 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:17.546 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:17.547 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@8dbf0f2{/__admin,null,AVAILABLE}
2022-29-17 11:29:17.547 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:17.547 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@603b9d4b{/,null,AVAILABLE}
2022-29-17 11:29:17.548 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4713b631{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10484}
2022-29-17 11:29:17.549 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@23263ba(wiremock,h=[tom akehurst],a=[],w=[]) for Server@1826475[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:17.551 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@6ba355e4{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13877}
2022-29-17 11:29:17.551 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @5328ms
2022-29-17 11:29:17.552 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:17.628 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:17.632 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:17.632 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@66682e8f]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-29-17 11:29:18.679 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:18.680 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:18.741 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:18.764 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:18.765 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@77226121{/__admin,null,AVAILABLE}
2022-29-17 11:29:18.765 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:18.765 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@1d0f7bcf{/,null,AVAILABLE}
2022-29-17 11:29:18.766 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@3186f8f5{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11465}
2022-29-17 11:29:18.767 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@53d2f0ec(wiremock,h=[tom akehurst],a=[],w=[]) for Server@1adfb5b8[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:18.769 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@254cc548{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14927}
2022-29-17 11:29:18.769 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @6546ms
2022-29-17 11:29:18.769 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:18.846 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:18.852 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:19.894 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:19.894 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:19.972 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:19.999 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:20.000 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@167bb934{/__admin,null,AVAILABLE}
2022-29-17 11:29:20.000 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:20.000 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@720c0996{/,null,AVAILABLE}
2022-29-17 11:29:20.001 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@3fecb076{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10731}
2022-29-17 11:29:20.002 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@3462e99a(wiremock,h=[tom akehurst],a=[],w=[]) for Server@70a54731[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:20.004 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@36d5c2ce{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14534}
2022-29-17 11:29:20.004 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @7781ms
2022-29-17 11:29:20.004 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:20.082 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:20.086 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:20.087 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@3b1137b0]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-29-17 11:29:21.136 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:21.136 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:21.195 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:21.221 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:21.222 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7533923b{/__admin,null,AVAILABLE}
2022-29-17 11:29:21.222 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:21.222 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@411ae0d7{/,null,AVAILABLE}
2022-29-17 11:29:21.223 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5e6bbe63{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10121}
2022-29-17 11:29:21.223 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@55e88bc(wiremock,h=[tom akehurst],a=[],w=[]) for Server@2d33795c[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:21.225 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@779ef5cb{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14565}
2022-29-17 11:29:21.225 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @9003ms
2022-29-17 11:29:21.226 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:21.304 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:21.308 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:22.347 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:22.347 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:22.412 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:22.433 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:22.434 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7bf16972{/__admin,null,AVAILABLE}
2022-29-17 11:29:22.435 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:22.435 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3d605657{/,null,AVAILABLE}
2022-29-17 11:29:22.436 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@552b15f6{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10700}
2022-29-17 11:29:22.436 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@4b4bc73d(wiremock,h=[tom akehurst],a=[],w=[]) for Server@6a6a3fc4[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:22.438 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@48cbe1c9{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12871}
2022-29-17 11:29:22.438 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10215ms
2022-29-17 11:29:22.438 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:22.516 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:22.520 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:22.520 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@41c88e00]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-29-17 11:29:22.542 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:22.542 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:22.584 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:22.603 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:22.604 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4df5f119{/__admin,null,AVAILABLE}
2022-29-17 11:29:22.604 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:22.604 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@1d5958d3{/,null,AVAILABLE}
2022-29-17 11:29:22.605 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@64f2b1b4{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11116}
2022-29-17 11:29:22.605 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@64acf8d2(wiremock,h=[tom akehurst],a=[],w=[]) for Server@71689ee2[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:22.607 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@f2b4303{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14552}
2022-29-17 11:29:22.607 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10384ms
2022-29-17 11:29:22.607 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:22.685 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:22.689 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:22.704 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:22.704 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:22.746 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:22.765 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:22.766 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@aca2a0b{/__admin,null,AVAILABLE}
2022-29-17 11:29:22.767 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:22.767 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@225fb75e{/,null,AVAILABLE}
2022-29-17 11:29:22.768 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5418893c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10590}
2022-29-17 11:29:22.768 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@18d09283(wiremock,h=[tom akehurst],a=[],w=[]) for Server@16257f8c[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:22.769 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@62158618{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13096}
2022-29-17 11:29:22.769 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10547ms
2022-29-17 11:29:22.770 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:22.847 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:22.849 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-29-17 11:29:22.849 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@1e0c898c]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-29-17 11:29:22.867 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 45898 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-29-17 11:29:22.868 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-29-17 11:29:22.910 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-29-17 11:29:22.936 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-29-17 11:29:22.937 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4a00d591{/__admin,null,AVAILABLE}
2022-29-17 11:29:22.938 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-29-17 11:29:22.938 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@42d96745{/,null,AVAILABLE}
2022-29-17 11:29:22.939 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@578781f7{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10029}
2022-29-17 11:29:22.940 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@d164938(wiremock,h=[tom akehurst],a=[],w=[]) for Server@1d722bff[provider=null,keyStore=null,trustStore=null]
2022-29-17 11:29:22.941 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@72c29d87{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14842}
2022-29-17 11:29:22.941 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10719ms
2022-29-17 11:29:22.942 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-29-17 11:29:23.020 [Test worker] WARN  org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-29-17 11:29:23.023 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:41.665 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-31-17 11:31:41.669 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-31-17 11:31:41.669 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-31-17 11:31:41.714 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-31-17 11:31:41.750 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-31-17 11:31:41.755 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2eb79cbe, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2ca6546f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@43826ec, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7923f5b3, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7578e06a, org.springframework.test.context.event.EventPublishingTestExecutionListener@30b2b76f, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@56da52a7, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@23ee75c5, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@11a7ba62, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@340b7ef6, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@30404dba, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6050462a, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@4c0884e8, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@231baf51]
2022-31-17 11:31:42.935 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-31-17 11:31:42.950 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:42.951 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:43.426 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:43.585 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:43.590 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2022-31-17 11:31:43.591 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:43.591 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:43.660 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:43.661 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 590 ms
2022-31-17 11:31:43.895 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @2892ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-31-17 11:31:44.026 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:44.037 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@67a38{/__admin,null,AVAILABLE}
2022-31-17 11:31:44.040 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:44.040 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@74bfdd66{/,null,AVAILABLE}
2022-31-17 11:31:44.047 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@112530c3{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11937}
2022-31-17 11:31:44.049 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@10f397d0(wiremock,h=[tom akehurst],a=[],w=[]) for Server@783dc0e7[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:44.065 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@361f26b4{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12975}
2022-31-17 11:31:44.066 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @3063ms
2022-31-17 11:31:44.073 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:44.162 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:44.163 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:44.181 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:45.221 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:45.221 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:45.312 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:45.363 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:45.363 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-2"]
2022-31-17 11:31:45.364 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:45.364 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:45.377 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:45.377 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 154 ms
2022-31-17 11:31:45.410 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:45.415 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@48bab2c6{/__admin,null,AVAILABLE}
2022-31-17 11:31:45.415 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:45.415 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@353422fd{/,null,AVAILABLE}
2022-31-17 11:31:45.418 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7430ed93{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11626}
2022-31-17 11:31:45.419 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@5d04fbb7(wiremock,h=[tom akehurst],a=[],w=[]) for Server@6ac2c5a1[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:45.422 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@364c93e6{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14224}
2022-31-17 11:31:45.422 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4419ms
2022-31-17 11:31:45.423 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:45.500 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:45.500 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:45.506 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:46.553 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:46.554 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:46.644 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:46.674 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:46.674 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-3"]
2022-31-17 11:31:46.675 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:46.675 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:46.687 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:46.687 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 130 ms
2022-31-17 11:31:46.714 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:46.715 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3673e211{/__admin,null,AVAILABLE}
2022-31-17 11:31:46.716 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:46.716 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@bb38c49{/,null,AVAILABLE}
2022-31-17 11:31:46.717 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7282f7b1{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11260}
2022-31-17 11:31:46.717 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@663f24e6(wiremock,h=[tom akehurst],a=[],w=[]) for Server@193d7ac7[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:46.720 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7d0333c8{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13085}
2022-31-17 11:31:46.720 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @5717ms
2022-31-17 11:31:46.720 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:46.798 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:46.799 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:46.805 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:46.805 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@5db90818]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-31-17 11:31:47.867 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:47.867 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:47.948 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:47.976 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:47.977 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-4"]
2022-31-17 11:31:47.977 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:47.977 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:47.989 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:47.989 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 120 ms
2022-31-17 11:31:48.015 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:48.016 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@69c51fdb{/__admin,null,AVAILABLE}
2022-31-17 11:31:48.016 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:48.017 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@73dd3a46{/,null,AVAILABLE}
2022-31-17 11:31:48.018 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1574f323{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10923}
2022-31-17 11:31:48.018 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@400d1c30(wiremock,h=[tom akehurst],a=[],w=[]) for Server@614ae4eb[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:48.020 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2cd31214{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12748}
2022-31-17 11:31:48.020 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @7017ms
2022-31-17 11:31:48.020 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:48.096 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:48.097 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:48.106 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:49.149 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:49.150 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:49.221 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:49.248 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:49.249 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-5"]
2022-31-17 11:31:49.249 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:49.249 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:49.259 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:49.259 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 107 ms
2022-31-17 11:31:49.283 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:49.284 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@68ea1eb5{/__admin,null,AVAILABLE}
2022-31-17 11:31:49.285 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:49.285 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@248ba4fc{/,null,AVAILABLE}
2022-31-17 11:31:49.285 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@6c68f29c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11745}
2022-31-17 11:31:49.286 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@125ba798(wiremock,h=[tom akehurst],a=[],w=[]) for Server@1c15a6aa[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:49.287 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7dc963be{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12872}
2022-31-17 11:31:49.288 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @8285ms
2022-31-17 11:31:49.288 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:49.365 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:49.365 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:49.370 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:49.370 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@1e749235]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-31-17 11:31:50.418 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:50.419 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:50.489 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:50.516 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:50.517 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-6"]
2022-31-17 11:31:50.517 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:50.517 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:50.527 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:50.527 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 106 ms
2022-31-17 11:31:50.552 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:50.554 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2f408960{/__admin,null,AVAILABLE}
2022-31-17 11:31:50.554 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:50.555 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6c4e11d0{/,null,AVAILABLE}
2022-31-17 11:31:50.556 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1a3611b1{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11706}
2022-31-17 11:31:50.556 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@4f3b11e6(wiremock,h=[tom akehurst],a=[],w=[]) for Server@195888a6[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:50.558 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2ced7cf{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13256}
2022-31-17 11:31:50.559 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @9556ms
2022-31-17 11:31:50.559 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:50.638 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:50.639 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:50.642 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:50.704 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:50.705 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:50.760 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:50.790 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:50.790 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-7"]
2022-31-17 11:31:50.790 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:50.790 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:50.801 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:50.801 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 96 ms
2022-31-17 11:31:50.824 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:50.825 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@736eb2a2{/__admin,null,AVAILABLE}
2022-31-17 11:31:50.826 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:50.826 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@26fc464f{/,null,AVAILABLE}
2022-31-17 11:31:50.827 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@259ae1a9{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11411}
2022-31-17 11:31:50.827 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@2e76ade9(wiremock,h=[tom akehurst],a=[],w=[]) for Server@4884350b[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:50.829 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@53cba89f{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12866}
2022-31-17 11:31:50.829 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @9826ms
2022-31-17 11:31:50.829 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:50.905 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:50.905 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:50.909 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:50.909 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@2003edf]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-31-17 11:31:50.930 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:50.930 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:50.984 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:51.013 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:51.014 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-8"]
2022-31-17 11:31:51.014 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:51.014 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:51.024 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-7].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:51.024 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 93 ms
2022-31-17 11:31:51.049 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:51.049 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4d305059{/__admin,null,AVAILABLE}
2022-31-17 11:31:51.050 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:51.050 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@31b4c003{/,null,AVAILABLE}
2022-31-17 11:31:51.051 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@597a5ead{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11582}
2022-31-17 11:31:51.051 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@12faeada(wiremock,h=[tom akehurst],a=[],w=[]) for Server@102dff25[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:51.053 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@216de23a{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13674}
2022-31-17 11:31:51.053 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10050ms
2022-31-17 11:31:51.053 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:51.133 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:51.133 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:51.137 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:51.155 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:51.155 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:51.200 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:51.231 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:51.233 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-9"]
2022-31-17 11:31:51.233 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:51.233 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:51.253 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:51.253 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 97 ms
2022-31-17 11:31:51.280 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:51.282 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@68312b85{/__admin,null,AVAILABLE}
2022-31-17 11:31:51.282 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:51.283 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@60052518{/,null,AVAILABLE}
2022-31-17 11:31:51.284 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@11e36e5c{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10187}
2022-31-17 11:31:51.284 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@258f97f8(wiremock,h=[tom akehurst],a=[],w=[]) for Server@3e60be48[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:51.286 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@20a533b{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13151}
2022-31-17 11:31:51.286 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10283ms
2022-31-17 11:31:51.286 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:51.363 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:51.363 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:51.367 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-31-17 11:31:51.367 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@623be2a0]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-31-17 11:31:51.388 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46029 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-31-17 11:31:51.388 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-31-17 11:31:51.436 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=9674bbc0-5d42-3ed5-9b4c-a9ef79186b0e
2022-31-17 11:31:51.470 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-31-17 11:31:51.471 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-10"]
2022-31-17 11:31:51.471 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-31-17 11:31:51.471 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-31-17 11:31:51.481 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-9].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-31-17 11:31:51.481 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 92 ms
2022-31-17 11:31:51.513 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-31-17 11:31:51.514 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6ea4b4b2{/__admin,null,AVAILABLE}
2022-31-17 11:31:51.514 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-31-17 11:31:51.514 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3285c141{/,null,AVAILABLE}
2022-31-17 11:31:51.515 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7937f96e{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10560}
2022-31-17 11:31:51.515 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@5ae5a507(wiremock,h=[tom akehurst],a=[],w=[]) for Server@13515709[provider=null,keyStore=null,trustStore=null]
2022-31-17 11:31:51.517 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1b3a1e42{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13444}
2022-31-17 11:31:51.517 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10515ms
2022-31-17 11:31:51.518 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-31-17 11:31:51.595 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [com/duitsev/apigateway/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityFilterChain' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2022-31-17 11:31:51.595 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-31-17 11:31:51.598 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of method springSecurityFilterChain in com.duitsev.apigateway.config.SecurityConfig required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.


Action:

Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.

2022-34-17 11:34:18.817 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-34-17 11:34:18.820 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-34-17 11:34:18.820 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-34-17 11:34:18.866 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-34-17 11:34:18.909 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-34-17 11:34:18.915 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@2eb79cbe, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2ca6546f, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@43826ec, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@7923f5b3, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445, org.springframework.test.context.support.DirtiesContextTestExecutionListener@7578e06a, org.springframework.test.context.event.EventPublishingTestExecutionListener@30b2b76f, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@56da52a7, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@23ee75c5, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@11a7ba62, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@340b7ef6, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@30404dba, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6050462a, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@4c0884e8, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@231baf51]
2022-34-17 11:34:20.102 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-34-17 11:34:20.117 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:20.119 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:20.591 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:20.752 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:20.757 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-1"]
2022-34-17 11:34:20.757 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:20.758 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:20.821 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:20.821 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 585 ms
2022-34-17 11:34:21.107 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @2823ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-34-17 11:34:21.242 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:21.252 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6c6919ff{/__admin,null,AVAILABLE}
2022-34-17 11:34:21.256 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:21.256 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@264576e4{/,null,AVAILABLE}
2022-34-17 11:34:21.263 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2cff03cf{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11082}
2022-34-17 11:34:21.265 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@56fa0ef(wiremock,h=[tom akehurst],a=[],w=[]) for Server@a6fc1bc[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:21.283 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5018b56b{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14559}
2022-34-17 11:34:21.283 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @2999ms
2022-34-17 11:34:21.348 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:21.350 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:21.368 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:22.425 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:22.425 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:22.507 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:22.547 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:22.548 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-2"]
2022-34-17 11:34:22.548 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:22.548 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:22.560 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-1].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:22.561 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 134 ms
2022-34-17 11:34:22.612 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:22.613 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@48697181{/__admin,null,AVAILABLE}
2022-34-17 11:34:22.614 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:22.614 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@8aa1562{/,null,AVAILABLE}
2022-34-17 11:34:22.616 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@18bf1bad{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10149}
2022-34-17 11:34:22.616 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@58189b85(wiremock,h=[tom akehurst],a=[],w=[]) for Server@74babce8[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:22.619 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1fab0394{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13202}
2022-34-17 11:34:22.619 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4335ms
2022-34-17 11:34:22.652 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:22.653 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:22.657 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:23.702 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:23.702 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:23.786 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:23.816 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:23.817 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-3"]
2022-34-17 11:34:23.817 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:23.817 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:23.833 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-2].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:23.833 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 129 ms
2022-34-17 11:34:23.872 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:23.874 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5d32f5db{/__admin,null,AVAILABLE}
2022-34-17 11:34:23.890 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:23.891 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@394950ad{/,null,AVAILABLE}
2022-34-17 11:34:23.892 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@468eff41{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10579}
2022-34-17 11:34:23.892 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@5bfdabf3(wiremock,h=[tom akehurst],a=[],w=[]) for Server@19656e21[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:23.895 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@614ae4eb{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13965}
2022-34-17 11:34:23.895 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @5611ms
2022-34-17 11:34:23.926 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:23.926 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:23.931 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:23.931 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@4b20aa21]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration.<init>(GatewayClassPathWarningAutoConfiguration.java:45) ~[spring-cloud-gateway-server-3.1.3.jar:3.1.3]
	at jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67) ~[?:?]
	at java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[?:?]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:483) ~[?:?]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-34-17 11:34:24.991 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:24.992 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:25.074 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:25.103 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:25.103 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-4"]
2022-34-17 11:34:25.104 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:25.104 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:25.118 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-3].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:25.119 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 125 ms
2022-34-17 11:34:25.158 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:25.159 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2d4f1ddd{/__admin,null,AVAILABLE}
2022-34-17 11:34:25.159 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:25.159 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@1f7b1d6a{/,null,AVAILABLE}
2022-34-17 11:34:25.161 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@b4c89b6{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10276}
2022-34-17 11:34:25.161 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@390978(wiremock,h=[tom akehurst],a=[],w=[]) for Server@3a6409ec[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:25.163 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4779df3d{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14529}
2022-34-17 11:34:25.163 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @6879ms
2022-34-17 11:34:25.186 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:25.186 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:25.190 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:26.235 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:26.235 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:26.318 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:26.348 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:26.349 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-5"]
2022-34-17 11:34:26.349 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:26.349 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:26.364 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-4].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:26.364 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 127 ms
2022-34-17 11:34:26.407 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:26.409 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2b69ff13{/__admin,null,AVAILABLE}
2022-34-17 11:34:26.409 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:26.409 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@30a79476{/,null,AVAILABLE}
2022-34-17 11:34:26.410 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@62cf873a{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12106}
2022-34-17 11:34:26.411 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@3705a85c(wiremock,h=[tom akehurst],a=[],w=[]) for Server@d4dbb34[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:26.412 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7af2ee23{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12520}
2022-34-17 11:34:26.412 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @8129ms
2022-34-17 11:34:26.435 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:26.436 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:26.443 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:26.443 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@67aaf882]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration.<init>(GatewayClassPathWarningAutoConfiguration.java:45) ~[spring-cloud-gateway-server-3.1.3.jar:3.1.3]
	at jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67) ~[?:?]
	at java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[?:?]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:483) ~[?:?]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-34-17 11:34:27.486 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:27.487 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:27.561 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:27.596 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:27.597 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-6"]
2022-34-17 11:34:27.597 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:27.597 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:27.613 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-5].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:27.613 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 125 ms
2022-34-17 11:34:27.655 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:27.657 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5f3bc119{/__admin,null,AVAILABLE}
2022-34-17 11:34:27.657 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:27.657 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@5e783f78{/,null,AVAILABLE}
2022-34-17 11:34:27.658 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@70a3b{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11103}
2022-34-17 11:34:27.658 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@34128fed(wiremock,h=[tom akehurst],a=[],w=[]) for Server@7715d43c[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:27.660 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@3763aafd{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13983}
2022-34-17 11:34:27.660 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @9377ms
2022-34-17 11:34:27.680 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:27.681 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:27.684 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:28.712 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:28.713 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:28.779 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:28.806 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:28.806 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-7"]
2022-34-17 11:34:28.806 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:28.807 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:28.820 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-6].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:28.820 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 106 ms
2022-34-17 11:34:28.865 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:28.866 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3b2317b7{/__admin,null,AVAILABLE}
2022-34-17 11:34:28.866 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:28.866 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@731bdcca{/,null,AVAILABLE}
2022-34-17 11:34:28.867 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4583a186{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11235}
2022-34-17 11:34:28.868 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@1297cf8(wiremock,h=[tom akehurst],a=[],w=[]) for Server@7212d3df[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:28.869 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@9886ec3{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:14345}
2022-34-17 11:34:28.869 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10586ms
2022-34-17 11:34:28.888 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:28.899 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:28.903 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:28.903 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@31ecd003]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration.<init>(GatewayClassPathWarningAutoConfiguration.java:45) ~[spring-cloud-gateway-server-3.1.3.jar:3.1.3]
	at jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67) ~[?:?]
	at java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[?:?]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:483) ~[?:?]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-34-17 11:34:28.925 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:28.926 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:28.986 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:29.009 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:29.009 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-8"]
2022-34-17 11:34:29.009 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:29.010 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:29.024 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-7].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:29.024 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 97 ms
2022-34-17 11:34:29.064 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:29.065 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3793896e{/__admin,null,AVAILABLE}
2022-34-17 11:34:29.066 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:29.066 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@750448fb{/,null,AVAILABLE}
2022-34-17 11:34:29.067 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@f5b81f4{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11696}
2022-34-17 11:34:29.067 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@6426ad0b(wiremock,h=[tom akehurst],a=[],w=[]) for Server@22dddb13[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:29.069 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@3d268a2c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13670}
2022-34-17 11:34:29.069 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10785ms
2022-34-17 11:34:29.095 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:29.096 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:29.099 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:29.114 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:29.114 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:29.164 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:29.194 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:29.195 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-9"]
2022-34-17 11:34:29.195 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:29.195 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:29.206 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-8].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:29.206 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 91 ms
2022-34-17 11:34:29.246 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:29.247 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@2c78771b{/__admin,null,AVAILABLE}
2022-34-17 11:34:29.247 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:29.247 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@1eb3a6a3{/,null,AVAILABLE}
2022-34-17 11:34:29.248 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4c617143{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10812}
2022-34-17 11:34:29.248 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@7d96618(wiremock,h=[tom akehurst],a=[],w=[]) for Server@40bac624[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:29.250 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@1bc80978{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13858}
2022-34-17 11:34:29.250 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @10966ms
2022-34-17 11:34:29.272 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:29.272 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:29.276 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-34-17 11:34:29.276 [Test worker] ERROR org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b63d445] to prepare test instance [com.duitsev.apigateway.ApiGatewayTest@1fdbba0d]
java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43) ~[spring-boot-test-autoconfigure-2.7.0.jar:2.7.0]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-5.3.20.jar:5.3.20]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]
	at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[?:?]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]
	at java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[?:?]
	at java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[?:?]
	at java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at java.util.Optional.orElseGet(Optional.java:364) ~[?:?]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66) ~[junit-jupiter-engine-5.8.2.jar:5.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at java.util.ArrayList.forEach(ArrayList.java:1511) ~[?:?]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.8.2.jar:1.8.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) ~[?:?]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) ~[?:?]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79) ~[?:?]
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75) ~[?:?]
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61) ~[?:?]
	at jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:577) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36) ~[?:?]
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24) ~[?:?]
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33) ~[?:?]
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94) ~[?:?]
	at jdk.proxy1.$Proxy2.stop(Unknown Source) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100) ~[?:?]
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60) ~[?:?]
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133) ~[?:?]
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71) ~[?:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69) ~[gradle-worker.jar:?]
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74) ~[gradle-worker.jar:?]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
Caused by: org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
	at org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration.<init>(GatewayClassPathWarningAutoConfiguration.java:45) ~[spring-cloud-gateway-server-3.1.3.jar:3.1.3]
	at jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67) ~[?:?]
	at java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[?:?]
	at java.lang.reflect.Constructor.newInstance(Constructor.java:483) ~[?:?]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.20.jar:5.3.20]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.0.jar:2.7.0]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132) ~[spring-boot-test-2.7.0.jar:2.7.0]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.20.jar:5.3.20]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.20.jar:5.3.20]
	... 84 more
2022-34-17 11:34:29.304 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46172 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-34-17 11:34:29.305 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-34-17 11:34:29.370 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=a375fa82-9907-3593-89d7-8eb724b7a67e
2022-34-17 11:34:29.397 [Test worker] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 0 (http)
2022-34-17 11:34:29.397 [Test worker] INFO  org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-auto-10"]
2022-34-17 11:34:29.398 [Test worker] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2022-34-17 11:34:29.398 [Test worker] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.63]
2022-34-17 11:34:29.408 [Test worker] INFO  org.apache.catalina.core.ContainerBase.[Tomcat-9].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2022-34-17 11:34:29.408 [Test worker] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 101 ms
2022-34-17 11:34:29.446 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-34-17 11:34:29.447 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3606c525{/__admin,null,AVAILABLE}
2022-34-17 11:34:29.447 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-34-17 11:34:29.447 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@128579a6{/,null,AVAILABLE}
2022-34-17 11:34:29.448 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@5118c7fb{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10231}
2022-34-17 11:34:29.448 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@7ebc2975(wiremock,h=[tom akehurst],a=[],w=[]) for Server@5b628249[provider=null,keyStore=null,trustStore=null]
2022-34-17 11:34:29.449 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@727eae52{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12792}
2022-34-17 11:34:29.449 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @11166ms
2022-34-17 11:34:29.468 [Test worker] WARN  org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.cloud.gateway.config.GatewayClassPathWarningAutoConfiguration$SpringMvcFoundOnClasspathConfiguration]: Constructor threw exception; nested exception is org.springframework.cloud.gateway.support.MvcFoundOnClasspathException
2022-34-17 11:34:29.468 [Test worker] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2022-34-17 11:34:29.471 [Test worker] ERROR org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Spring MVC found on classpath, which is incompatible with Spring Cloud Gateway.

Action:

Please set spring.main.web-application-type=reactive or remove spring-boot-starter-web dependency.

2022-37-17 11:37:21.418 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-37-17 11:37:21.422 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-37-17 11:37:21.422 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-37-17 11:37:21.467 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-37-17 11:37:21.497 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-37-17 11:37:21.502 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@551de37d, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@6ef81f31, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6075b2d3, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31, org.springframework.test.context.support.DirtiesContextTestExecutionListener@997d532, org.springframework.test.context.event.EventPublishingTestExecutionListener@273842a6, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6a969fb8, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7a18e8d, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@3028e50e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5560bcdf, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@b558294, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@bb095, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@777c350f, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@27aae97b]
2022-37-17 11:37:22.693 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-37-17 11:37:22.710 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46348 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-37-17 11:37:22.711 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-37-17 11:37:23.108 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-37-17 11:37:23.490 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @2745ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-37-17 11:37:23.613 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-37-17 11:37:23.625 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4cc4d454{/__admin,null,AVAILABLE}
2022-37-17 11:37:23.629 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-37-17 11:37:23.629 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6ebbc06{/,null,AVAILABLE}
2022-37-17 11:37:23.635 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7ac685ef{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12475}
2022-37-17 11:37:23.637 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@39ae6408(wiremock,h=[tom akehurst],a=[],w=[]) for Server@16b7e04a[provider=null,keyStore=null,trustStore=null]
2022-37-17 11:37:23.655 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@661db63e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13583}
2022-37-17 11:37:23.655 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @2911ms
2022-37-17 11:37:23.662 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-37-17 11:37:24.887 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-37-17 11:37:25.101 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-37-17 11:37:25.101 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-37-17 11:37:25.101 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-37-17 11:37:25.101 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-37-17 11:37:25.101 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-37-17 11:37:25.101 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-37-17 11:37:25.101 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-37-17 11:37:25.101 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-37-17 11:37:25.102 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-37-17 11:37:25.102 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-37-17 11:37:25.102 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-37-17 11:37:25.102 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-37-17 11:37:25.102 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-37-17 11:37:25.102 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-37-17 11:37:26.224 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-37-17 11:37:26.370 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 51778
2022-37-17 11:37:27.377 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-37-17 11:37:28.384 [Test worker] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2022-37-17 11:37:28.422 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 6.898 seconds (JVM running for 7.677)
2022-37-17 11:37:29.240 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51778/savings/a/balance is routed to id: e0c5e775-4596-4013-b896-cb0f74c37d09, uri:http://localhost:12475/balance
2022-37-17 11:37:29.328 [qtp47968986-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51778";for="127.0.0.1:51779"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51778]
X-Forwarded-Host: [localhost:51778]
Host: [localhost:12475]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [035d5fa2-bc5e-4937-a432-a43e493f1c51]


2022-37-17 11:37:30.487 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51778/savings/a/balance is routed to id: e0c5e775-4596-4013-b896-cb0f74c37d09, uri:http://localhost:12475/balance
2022-37-17 11:37:30.498 [qtp47968986-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51778";for="127.0.0.1:51779"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51778]
X-Forwarded-Host: [localhost:51778]
Host: [localhost:12475]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [f56e5a5d-1b69-43c3-9f3c-fb74743e3397]


2022-37-17 11:37:30.617 [parallel-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51778/savings/b/balance is routed to id: 312c1394-a39d-4007-bfa3-a57777335d7e, uri:http://localhost:12475/balance
2022-37-17 11:37:30.621 [qtp47968986-47] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51778";for="127.0.0.1:51782"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [51778]
X-Forwarded-Host: [localhost:51778]
Host: [localhost:12475]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [f56e5a5d-1b69-43c3-9f3c-fb74743e3397]


2022-37-17 11:37:30.718 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7ac685ef{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12475}
2022-37-17 11:37:30.719 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@661db63e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13583}
2022-37-17 11:37:30.719 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@6ebbc06{/,null,STOPPED}
2022-37-17 11:37:30.720 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@4cc4d454{/__admin,null,STOPPED}
2022-37-17 11:37:30.721 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-37-17 11:37:30.722 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4cc4d454{/__admin,null,AVAILABLE}
2022-37-17 11:37:30.722 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-37-17 11:37:30.722 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6ebbc06{/,null,AVAILABLE}
2022-37-17 11:37:30.724 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7ac685ef{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12475}
2022-37-17 11:37:30.724 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@2e845f1c(wiremock,h=[tom akehurst],a=[],w=[]) for Server@16b7e04a[provider=null,keyStore=null,trustStore=null]
2022-37-17 11:37:30.727 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@661db63e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13583}
2022-37-17 11:37:30.727 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @9983ms
2022-37-17 11:37:30.738 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7ac685ef{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:12475}
2022-37-17 11:37:30.740 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@661db63e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13583}
2022-37-17 11:37:30.741 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@6ebbc06{/,null,STOPPED}
2022-37-17 11:37:30.741 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@4cc4d454{/__admin,null,STOPPED}
2022-37-17 11:37:30.749 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [06a4dab9-3, L:/127.0.0.1:51779 ! R:localhost/127.0.0.1:51778] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-37-17 11:37:30.749 [reactor-http-nio-7] WARN  reactor.netty.http.client.HttpClientConnect - [091806bf-1, L:/127.0.0.1:51782 ! R:localhost/127.0.0.1:51778] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-37-17 11:37:47.605 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-37-17 11:37:47.608 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-37-17 11:37:47.609 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-37-17 11:37:47.652 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-37-17 11:37:47.682 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-37-17 11:37:47.687 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@749f539e, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5ca1f591, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@551de37d, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6ef81f31, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6075b2d3, org.springframework.test.context.event.EventPublishingTestExecutionListener@33abde31, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@997d532, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@273842a6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6a969fb8, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@7a18e8d, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@3028e50e, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5560bcdf, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@b558294, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@bb095]
2022-37-17 11:37:47.837 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-37-17 11:37:47.850 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46384 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-37-17 11:37:47.851 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-37-17 11:37:48.248 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-37-17 11:37:48.613 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1610ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-37-17 11:37:48.750 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-37-17 11:37:48.763 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4cc4d454{/__admin,null,AVAILABLE}
2022-37-17 11:37:48.769 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-37-17 11:37:48.769 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6ebbc06{/,null,AVAILABLE}
2022-37-17 11:37:48.776 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7ac685ef{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10601}
2022-37-17 11:37:48.779 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@39ae6408(wiremock,h=[tom akehurst],a=[],w=[]) for Server@16b7e04a[provider=null,keyStore=null,trustStore=null]
2022-37-17 11:37:48.800 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@661db63e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12774}
2022-37-17 11:37:48.800 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1797ms
2022-37-17 11:37:48.807 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-37-17 11:37:48.942 [Test worker] INFO  org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration - 

Using generated security password: e5df801c-927b-4f0a-a5a2-29e5f5d73e09

2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-37-17 11:37:49.211 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-37-17 11:37:49.212 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-37-17 11:37:49.212 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-37-17 11:37:49.212 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-37-17 11:37:49.423 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 51788
2022-37-17 11:37:49.442 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.734 seconds (JVM running for 2.439)
2022-37-17 11:37:49.828 [Test worker] ERROR org.springframework.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> GET http://localhost:51788/savings/a/balance
> accept-encoding: [gzip]
> user-agent: [ReactorNetty/1.0.19]
> host: [localhost:51788]
> accept: [*/*]
> WebTestClient-Request-Id: [1]
> Authorization: [Basic dXNlcjpwYXNz]

No content

< 401 UNAUTHORIZED Unauthorized
< WWW-Authenticate: [Basic realm="Realm"]
< Cache-Control: [no-cache, no-store, max-age=0, must-revalidate]
< Pragma: [no-cache]
< Expires: [0]
< X-Content-Type-Options: [nosniff]
< X-Frame-Options: [DENY]
< X-XSS-Protection: [1 ; mode=block]
< Referrer-Policy: [no-referrer]
< content-length: [0]

0 bytes of content (unknown content-type).

2022-37-17 11:37:49.842 [Test worker] ERROR org.springframework.test.web.reactive.server.ExchangeResult - Request details for assertion failure:

> GET http://localhost:51788/savings/a/balance
> accept-encoding: [gzip]
> user-agent: [ReactorNetty/1.0.19]
> host: [localhost:51788]
> accept: [*/*]
> WebTestClient-Request-Id: [3]
> Authorization: [Basic dXNlcjpwYXNz]

No content

< 401 UNAUTHORIZED Unauthorized
< WWW-Authenticate: [Basic realm="Realm"]
< Cache-Control: [no-cache, no-store, max-age=0, must-revalidate]
< Pragma: [no-cache]
< Expires: [0]
< X-Content-Type-Options: [nosniff]
< X-Frame-Options: [DENY]
< X-XSS-Protection: [1 ; mode=block]
< Referrer-Policy: [no-referrer]
< content-length: [0]

0 bytes of content (unknown content-type).

2022-37-17 11:37:49.861 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7ac685ef{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10601}
2022-37-17 11:37:49.862 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@661db63e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12774}
2022-37-17 11:37:49.863 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@6ebbc06{/,null,STOPPED}
2022-37-17 11:37:49.863 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@4cc4d454{/__admin,null,STOPPED}
2022-37-17 11:37:49.865 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-37-17 11:37:49.866 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@4cc4d454{/__admin,null,AVAILABLE}
2022-37-17 11:37:49.867 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-37-17 11:37:49.867 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@6ebbc06{/,null,AVAILABLE}
2022-37-17 11:37:49.868 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@7ac685ef{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10601}
2022-37-17 11:37:49.869 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@f776b4a(wiremock,h=[tom akehurst],a=[],w=[]) for Server@16b7e04a[provider=null,keyStore=null,trustStore=null]
2022-37-17 11:37:49.873 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@661db63e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12774}
2022-37-17 11:37:49.874 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @2871ms
2022-37-17 11:37:49.887 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@7ac685ef{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10601}
2022-37-17 11:37:49.888 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@661db63e{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12774}
2022-37-17 11:37:49.889 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@6ebbc06{/,null,STOPPED}
2022-37-17 11:37:49.889 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@4cc4d454{/__admin,null,STOPPED}
2022-38-17 11:38:10.879 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-38-17 11:38:10.882 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-38-17 11:38:10.883 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-38-17 11:38:10.935 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-38-17 11:38:10.966 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-38-17 11:38:10.970 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@551de37d, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@6ef81f31, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6075b2d3, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@33abde31, org.springframework.test.context.support.DirtiesContextTestExecutionListener@997d532, org.springframework.test.context.event.EventPublishingTestExecutionListener@273842a6, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@6a969fb8, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@7a18e8d, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@3028e50e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5560bcdf, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@b558294, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@bb095, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@777c350f, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@27aae97b]
2022-38-17 11:38:11.113 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-38-17 11:38:11.128 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46410 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-38-17 11:38:11.128 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-38-17 11:38:11.526 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=4cfba873-c543-39ca-8abc-b047ecbd00d2
2022-38-17 11:38:11.969 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1685ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-38-17 11:38:12.098 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-38-17 11:38:12.106 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@df9d400{/__admin,null,AVAILABLE}
2022-38-17 11:38:12.110 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-38-17 11:38:12.110 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3dc55719{/,null,AVAILABLE}
2022-38-17 11:38:12.116 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@391d28ea{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11604}
2022-38-17 11:38:12.118 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@6487f7f8(wiremock,h=[tom akehurst],a=[],w=[]) for Server@2fa879ed[provider=null,keyStore=null,trustStore=null]
2022-38-17 11:38:12.139 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2b2b7e3c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12596}
2022-38-17 11:38:12.139 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1855ms
2022-38-17 11:38:12.146 [Test worker] WARN  org.springframework.security.core.userdetails.User - User.withDefaultPasswordEncoder() is considered unsafe for production and is only intended for sample applications.
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-38-17 11:38:12.560 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-38-17 11:38:12.561 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-38-17 11:38:12.561 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-38-17 11:38:12.561 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-38-17 11:38:12.561 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-38-17 11:38:12.561 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-38-17 11:38:12.782 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 51795
2022-38-17 11:38:12.802 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.809 seconds (JVM running for 2.518)
2022-38-17 11:38:13.247 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51795/savings/a/balance is routed to id: af9a1af1-b740-4936-a2c6-43907aab2799, uri:http://localhost:11604/balance
2022-38-17 11:38:13.350 [qtp695650897-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51795";for="127.0.0.1:51796"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51795]
X-Forwarded-Host: [localhost:51795]
Host: [localhost:11604]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [c21a7baa-a9b0-49d5-8aa6-f4229757f7c2]


2022-38-17 11:38:14.495 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51795/savings/a/balance is routed to id: af9a1af1-b740-4936-a2c6-43907aab2799, uri:http://localhost:11604/balance
2022-38-17 11:38:14.504 [qtp695650897-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51795";for="127.0.0.1:51796"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51795]
X-Forwarded-Host: [localhost:51795]
Host: [localhost:11604]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [823c4233-098e-4357-8049-e84188f6c134]


2022-38-17 11:38:14.610 [parallel-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51795/savings/b/balance is routed to id: e2e54f24-b86a-4965-985a-748350aa4944, uri:http://localhost:11604/balance
2022-38-17 11:38:14.613 [qtp695650897-47] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51795";for="127.0.0.1:51799"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [51795]
X-Forwarded-Host: [localhost:51795]
Host: [localhost:11604]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [823c4233-098e-4357-8049-e84188f6c134]


2022-38-17 11:38:14.715 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@391d28ea{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11604}
2022-38-17 11:38:14.715 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@2b2b7e3c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12596}
2022-38-17 11:38:14.716 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@3dc55719{/,null,STOPPED}
2022-38-17 11:38:14.716 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@df9d400{/__admin,null,STOPPED}
2022-38-17 11:38:14.718 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-38-17 11:38:14.718 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@df9d400{/__admin,null,AVAILABLE}
2022-38-17 11:38:14.719 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-38-17 11:38:14.719 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@3dc55719{/,null,AVAILABLE}
2022-38-17 11:38:14.720 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@391d28ea{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11604}
2022-38-17 11:38:14.721 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@1f67d37f(wiremock,h=[tom akehurst],a=[],w=[]) for Server@2fa879ed[provider=null,keyStore=null,trustStore=null]
2022-38-17 11:38:14.723 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@2b2b7e3c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12596}
2022-38-17 11:38:14.723 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4439ms
2022-38-17 11:38:14.732 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@391d28ea{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11604}
2022-38-17 11:38:14.733 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@2b2b7e3c{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:12596}
2022-38-17 11:38:14.733 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@3dc55719{/,null,STOPPED}
2022-38-17 11:38:14.733 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@df9d400{/__admin,null,STOPPED}
2022-38-17 11:38:14.736 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [4d2805f8-3, L:/127.0.0.1:51796 ! R:localhost/127.0.0.1:51795] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-38-17 11:38:30.189 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-38-17 11:38:30.193 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-38-17 11:38:30.193 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-38-17 11:38:30.238 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-38-17 11:38:30.268 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-38-17 11:38:30.273 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@749f539e, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@5ca1f591, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@551de37d, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6ef81f31, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6075b2d3, org.springframework.test.context.event.EventPublishingTestExecutionListener@33abde31, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@997d532, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@273842a6, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6a969fb8, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@7a18e8d, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@3028e50e, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5560bcdf, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@b558294, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@bb095]
2022-38-17 11:38:30.425 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-38-17 11:38:30.445 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46429 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-38-17 11:38:30.446 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-38-17 11:38:30.831 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-38-17 11:38:31.195 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1504ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-38-17 11:38:31.327 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-38-17 11:38:31.335 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7742a276{/__admin,null,AVAILABLE}
2022-38-17 11:38:31.339 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-38-17 11:38:31.340 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@241d1052{/,null,AVAILABLE}
2022-38-17 11:38:31.345 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4489f60f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10672}
2022-38-17 11:38:31.347 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@362cf66(wiremock,h=[tom akehurst],a=[],w=[]) for Server@7bdb4f17[provider=null,keyStore=null,trustStore=null]
2022-38-17 11:38:31.366 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@77856cc5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13232}
2022-38-17 11:38:31.366 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1675ms
2022-38-17 11:38:31.709 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-38-17 11:38:31.709 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-38-17 11:38:31.709 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-38-17 11:38:31.709 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-38-17 11:38:31.709 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-38-17 11:38:31.710 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-38-17 11:38:31.926 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 51807
2022-38-17 11:38:31.943 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.643 seconds (JVM running for 2.252)
2022-38-17 11:38:32.386 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51807/savings/a/balance is routed to id: b3edc97f-fad0-44bb-81ab-84800939ac3f, uri:http://localhost:10672/balance
2022-38-17 11:38:32.472 [qtp1912609905-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51807";for="127.0.0.1:51808"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51807]
X-Forwarded-Host: [localhost:51807]
Host: [localhost:10672]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [4b7951ff-64a6-4f0e-9e1c-442e5099466c]


2022-38-17 11:38:33.629 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51807/savings/a/balance is routed to id: b3edc97f-fad0-44bb-81ab-84800939ac3f, uri:http://localhost:10672/balance
2022-38-17 11:38:33.635 [qtp1912609905-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51807";for="127.0.0.1:51808"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51807]
X-Forwarded-Host: [localhost:51807]
Host: [localhost:10672]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [fc628d21-97f8-4109-9a44-a924db4b691d]


2022-38-17 11:38:33.728 [parallel-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51807/savings/b/balance is routed to id: 34b6991b-12ca-4cb9-a35c-ae690f0c31de, uri:http://localhost:10672/balance
2022-38-17 11:38:33.731 [qtp1912609905-47] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51807";for="127.0.0.1:51811"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [51807]
X-Forwarded-Host: [localhost:51807]
Host: [localhost:10672]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [fc628d21-97f8-4109-9a44-a924db4b691d]


2022-38-17 11:38:33.827 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@4489f60f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10672}
2022-38-17 11:38:33.828 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@77856cc5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13232}
2022-38-17 11:38:33.829 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@241d1052{/,null,STOPPED}
2022-38-17 11:38:33.829 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@7742a276{/__admin,null,STOPPED}
2022-38-17 11:38:33.830 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-38-17 11:38:33.831 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7742a276{/__admin,null,AVAILABLE}
2022-38-17 11:38:33.831 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-38-17 11:38:33.831 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@241d1052{/,null,AVAILABLE}
2022-38-17 11:38:33.833 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4489f60f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10672}
2022-38-17 11:38:33.833 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@4a49ce3a(wiremock,h=[tom akehurst],a=[],w=[]) for Server@7bdb4f17[provider=null,keyStore=null,trustStore=null]
2022-38-17 11:38:33.836 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@77856cc5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13232}
2022-38-17 11:38:33.836 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4145ms
2022-38-17 11:38:33.847 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@4489f60f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:10672}
2022-38-17 11:38:33.851 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@77856cc5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13232}
2022-38-17 11:38:33.852 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@241d1052{/,null,STOPPED}
2022-38-17 11:38:33.852 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@7742a276{/__admin,null,STOPPED}
2022-38-17 11:38:33.855 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [65e19ef5-3, L:/127.0.0.1:51808 ! R:localhost/127.0.0.1:51807] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-38-17 11:38:33.855 [reactor-http-nio-7] WARN  reactor.netty.http.client.HttpClientConnect - [a149223b-1, L:/127.0.0.1:51811 ! R:localhost/127.0.0.1:51807] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-38-17 11:38:45.489 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.duitsev.apigateway.ApiGatewayTest], using SpringBootContextLoader
2022-38-17 11:38:45.492 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.duitsev.apigateway.ApiGatewayTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2022-38-17 11:38:45.492 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.duitsev.apigateway.ApiGatewayTest]: ApiGatewayTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2022-38-17 11:38:45.532 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.duitsev.apigateway.ApiGatewayApplication for test class com.duitsev.apigateway.ApiGatewayTest
2022-38-17 11:38:45.564 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2022-38-17 11:38:45.568 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@53dfacba, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@79767781, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@78411116, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@aced190, org.springframework.test.context.support.DirtiesContextTestExecutionListener@245a060f, org.springframework.test.context.event.EventPublishingTestExecutionListener@6edaa77a, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@1e63d216, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@62ddd21b, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@16c3ca31, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@2d195ee4, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@2d6aca33, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@21ab988f, org.springframework.cloud.contract.stubrunner.provider.wiremock.StubRunnerWireMockTestExecutionListener@29314cc9, org.springframework.cloud.contract.wiremock.WireMockTestExecutionListener@4e38d975]
2022-38-17 11:38:45.708 [background-preinit] INFO  org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 6.2.3.Final
2022-38-17 11:38:45.725 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Starting ApiGatewayTest using Java 18.0.1.1 on Aleksandrs-MacBook-Air.local with PID 46460 (started by aleksandr in /Users/aleksandr/Workspace/kadmos-case-study/api-gateway)
2022-38-17 11:38:45.726 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - The following 1 profile is active: "test"
2022-38-17 11:38:46.077 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope - BeanFactory id=d78badaa-c145-370a-9096-c6988896c2fd
2022-38-17 11:38:46.406 [Test worker] INFO  wiremock.org.eclipse.jetty.util.log - Logging initialized @1410ms to wiremock.org.eclipse.jetty.util.log.Slf4jLog
2022-38-17 11:38:46.529 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-38-17 11:38:46.540 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7742a276{/__admin,null,AVAILABLE}
2022-38-17 11:38:46.551 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-38-17 11:38:46.551 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@241d1052{/,null,AVAILABLE}
2022-38-17 11:38:46.557 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4489f60f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11211}
2022-38-17 11:38:46.559 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@362cf66(wiremock,h=[tom akehurst],a=[],w=[]) for Server@7bdb4f17[provider=null,keyStore=null,trustStore=null]
2022-38-17 11:38:46.580 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@77856cc5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13925}
2022-38-17 11:38:46.581 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @1584ms
2022-38-17 11:38:46.899 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2022-38-17 11:38:46.899 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2022-38-17 11:38:46.900 [Test worker] INFO  org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-38-17 11:38:47.116 [Test worker] INFO  org.springframework.boot.web.embedded.netty.NettyWebServer - Netty started on port 51816
2022-38-17 11:38:47.134 [Test worker] INFO  com.duitsev.apigateway.ApiGatewayTest - Started ApiGatewayTest in 1.545 seconds (JVM running for 2.138)
2022-38-17 11:38:47.567 [parallel-1] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51816/savings/a/balance is routed to id: c67aad66-7a94-4349-985c-36c61071a8fc, uri:http://localhost:11211/balance
2022-38-17 11:38:47.625 [qtp1912609905-49] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [1]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51816";for="127.0.0.1:51817"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51816]
X-Forwarded-Host: [localhost:51816]
Host: [localhost:11211]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}",
  "fixedDelayMilliseconds" : 1100
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [2be36718-3293-45d2-80d1-d8f6f2780f05]


2022-38-17 11:38:48.800 [parallel-3] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51816/savings/a/balance is routed to id: c67aad66-7a94-4349-985c-36c61071a8fc, uri:http://localhost:11211/balance
2022-38-17 11:38:48.808 [qtp1912609905-23] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [3]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51816";for="127.0.0.1:51817"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/a]
X-Forwarded-Port: [51816]
X-Forwarded-Host: [localhost:51816]
Host: [localhost:11211]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [54d5cbae-21f7-4aac-b76d-1a067e2a612f]


2022-38-17 11:38:48.903 [parallel-6] INFO  com.duitsev.apigateway.config.LoggingFilter - Incoming request http://localhost:51816/savings/b/balance is routed to id: 1a7fade2-1a44-44b7-8250-fe845359237d, uri:http://localhost:11211/balance
2022-38-17 11:38:48.906 [qtp1912609905-47] INFO  WireMock - Request received:
127.0.0.1 - GET /balance

Accept-Encoding: [gzip]
User-Agent: [ReactorNetty/1.0.19]
Accept: [*/*]
WebTestClient-Request-Id: [4]
Authorization: [Basic dXNlcjpwYXNz]
Forwarded: [proto=http;host="localhost:51816";for="127.0.0.1:51820"]
X-Forwarded-For: [127.0.0.1]
X-Forwarded-Proto: [http]
X-Forwarded-Prefix: [/savings/b]
X-Forwarded-Port: [51816]
X-Forwarded-Host: [localhost:51816]
Host: [localhost:11211]
Content-Length: [0]



Matched response definition:
{
  "status" : 200,
  "body" : "{\"balance\":\"100\"}"
}

Response:
HTTP/1.1 200
Matched-Stub-Id: [54d5cbae-21f7-4aac-b76d-1a067e2a612f]


2022-38-17 11:38:48.998 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@4489f60f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11211}
2022-38-17 11:38:48.998 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@77856cc5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13925}
2022-38-17 11:38:48.999 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@241d1052{/,null,STOPPED}
2022-38-17 11:38:49.000 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@7742a276{/__admin,null,STOPPED}
2022-38-17 11:38:49.001 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - jetty-9.4.46.v20220331; built: 2022-03-31T16:38:08.030Z; git: bc17a0369a11ecf40bb92c839b9ef0a8ac50ea18; jvm 18.0.1.1+2-6
2022-38-17 11:38:49.002 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@7742a276{/__admin,null,AVAILABLE}
2022-38-17 11:38:49.002 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler.ROOT - RequestHandlerClass from context returned com.github.tomakehurst.wiremock.http.StubRequestHandler. Normalized mapped under returned 'null'
2022-38-17 11:38:49.002 [Test worker] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Started w.o.e.j.s.ServletContextHandler@241d1052{/,null,AVAILABLE}
2022-38-17 11:38:49.003 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@4489f60f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11211}
2022-38-17 11:38:49.004 [Test worker] INFO  wiremock.org.eclipse.jetty.util.ssl.SslContextFactory - x509=X509@5319efc0(wiremock,h=[tom akehurst],a=[],w=[]) for Server@7bdb4f17[provider=null,keyStore=null,trustStore=null]
2022-38-17 11:38:49.006 [Test worker] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Started NetworkTrafficServerConnector@77856cc5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13925}
2022-38-17 11:38:49.006 [Test worker] INFO  wiremock.org.eclipse.jetty.server.Server - Started @4010ms
2022-38-17 11:38:49.013 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@4489f60f{HTTP/1.1, (http/1.1, h2c)}{0.0.0.0:11211}
2022-38-17 11:38:49.014 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.AbstractConnector - Stopped NetworkTrafficServerConnector@77856cc5{SSL, (ssl, alpn, h2, http/1.1)}{0.0.0.0:13925}
2022-38-17 11:38:49.014 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@241d1052{/,null,STOPPED}
2022-38-17 11:38:49.014 [SpringApplicationShutdownHook] INFO  wiremock.org.eclipse.jetty.server.handler.ContextHandler - Stopped w.o.e.j.s.ServletContextHandler@7742a276{/__admin,null,STOPPED}
2022-38-17 11:38:49.017 [reactor-http-nio-3] WARN  reactor.netty.http.client.HttpClientConnect - [b62254f9-3, L:/127.0.0.1:51817 ! R:localhost/127.0.0.1:51816] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
2022-38-17 11:38:49.017 [reactor-http-nio-7] WARN  reactor.netty.http.client.HttpClientConnect - [62760e01-1, L:/127.0.0.1:51820 ! R:localhost/127.0.0.1:51816] The connection observed an error
reactor.netty.http.client.PrematureCloseException: Connection prematurely closed DURING response
